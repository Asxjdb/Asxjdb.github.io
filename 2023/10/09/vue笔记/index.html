

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/violin-sqr.png">
  <link rel="icon" href="/img/violin-sqr.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Asxjdb">
  <meta name="keywords" content="">
  
    <meta name="description" content="如题">
<meta property="og:type" content="article">
<meta property="og:title" content="vue笔记">
<meta property="og:url" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Asxjdb">
<meta property="og:description" content="如题">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230923160822252.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/6166336bf2d9cde9377a48e254cb9099-0.gif">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/23828431d3d026838a875127d37f4ca2-0.gif">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230325165358147.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230325170321186.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230327210304577.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20231004162939423.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20231004165105155.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/c60ce628cc702cc13e22bfb688fbf9e0-0.gif">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230902171945781.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230902210547501.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230903113559397.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230903113814077.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230903115658432.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230911151041239.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230912201155664.png">
<meta property="og:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230912201356552.png">
<meta property="article:published_time" content="2023-10-09T15:01:28.000Z">
<meta property="article:modified_time" content="2024-03-27T03:44:59.926Z">
<meta property="article:author" content="Asxjdb">
<meta property="article:tag" content="语言入门">
<meta property="article:tag" content="备忘">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://asxjdb.github.io/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230923160822252.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>vue笔记 - Asxjdb</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"asxjdb.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"gtag":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Asxjdb</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/my-front-end/" target="_self">
                <i class="iconfont icon-books"></i>
                <span>我的前端笔记</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="vue笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-09 23:01" pubdate>
          2023年10月9日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          22k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          181 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">vue笔记</h1>
            
              <p id="updated-time" class="note note-info" style="display: none">
                
                  
                    本文最后更新于 2024-03-27T11:44:59+08:00
                  
                  

                
              </p>
            
            
              <div class="markdown-body">
                
                <h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><ul>
<li><p>2023年8月20日</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1p84y1P7Z5">尚硅谷</a>截止 P145</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV14J4114768">pink</a> P196 - P300   跳过品优购、动画</p>
</li>
<li><p>2023年8月21日</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV14J4114768">pink</a> P390</p>
</li>
<li><p>2023年8月22日</p>
<p>P415 京东首页 流式布局</p>
</li>
<li><p>2023年8月23日</p>
<p>P454 </p>
</li>
<li><p>2023年8月24日</p>
<p>学习grid，跳过苏宁，黑马面面</p>
</li>
<li><p>2023年8月25日</p>
<p>结束HTML+CSS，跳过阿里百秀、bilibili</p>
</li>
<li><p>2023年8月26日</p>
<p>阅读SAST skill docs JavaScript部分，至异步</p>
</li>
<li><p>2023年8月27日</p>
<p>SAST JavaScript完结</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Y84y1L7Nn">pink JavaScript</a> API day2完结</p>
</li>
<li><p>2023年8月29日</p>
<p>API day4</p>
</li>
<li><p>2023年8月29日</p>
<p>API结束，未看注册案例</p>
</li>
<li><p>2023年9月1日</p>
<p>结束js，开始ajax，结束ajax</p>
</li>
<li><p>2023年9月2日</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1dS4y1y7vd">小满vue</a>，启动！</p>
</li>
<li><p>2023年9月3日</p>
<p>跳过P10（响应式原理）</p>
</li>
<li><p>2023年9月4日</p>
<p>完成P15</p>
</li>
<li><p>2023年9月5日</p>
<p>完成P20，P20异步组件跳过</p>
</li>
<li><p>2023年9月6日</p>
<p>完成P30</p>
</li>
<li><p>2023年9月11日</p>
<p>跳过P33 p35 P37 P38（tsx, v-model）</p>
</li>
<li><p>2023年9月13日</p>
<p>跳过P41 自定义hooks</p>
</li>
<li><p>2023年9月17日</p>
<p>开始看张天禹</p>
</li>
<li><p>2023年9月19日</p>
<p>看完<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=13">P13</a></p>
</li>
<li><p>2023年9月20日</p>
<p>看完P20</p>
</li>
<li><p>2023年9月21日</p>
<p>看完P30</p>
</li>
<li><p>2023年9月22日</p>
<p>看完P47</p>
</li>
<li><p>2023年9月23日</p>
<p>看完P59</p>
</li>
<li><p>2023年10月1日</p>
<p>看完P72</p>
</li>
<li><p>2023年10月2日</p>
<p>看完P89</p>
</li>
<li><p>2023年10月3日</p>
<p>看完P117</p>
</li>
</ul>
<h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">wget https://labfile.oss.aliyuncs.com/courses/1262/vue.min.js<br></code></pre></td></tr></table></figure>

<h3 id="工程化"><a href="#工程化" class="headerlink" title="工程化"></a>工程化</h3><h4 id="计算、侦听与过滤器、生命周期钩子"><a href="#计算、侦听与过滤器、生命周期钩子" class="headerlink" title="计算、侦听与过滤器、生命周期钩子"></a>计算、侦听与过滤器、生命周期钩子</h4><ul>
<li>计算属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>我名字正着写：&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- reverseName 计算属性  可以像绑定普通属性一样在模板中绑定计算属性--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>计算出我名字倒着写：&#123;&#123;reverseName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">goodsList</span>: &#123;,</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;实验楼&quot;</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// reverseName 是一个计算属性</span></span><br><span class="language-javascript">                <span class="hljs-attr">reverseName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">reverse</span>().<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>);</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-comment">// 一个只在内面挂载完毕，才开始执行的函数</span></span><br><span class="language-javascript">            <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;goodsList.json&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">goodsList</span> = val.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>生命周期函数是在特定时间点执行的函数，其中<code>this</code>的指向为<code>vm</code>或<code>组件</code></p>
<p>当你的计算属性的依赖数据发生改变时，你的相关计算属性也会重新计算</p>
<p>set与get: 给<code>this.计算属性</code>赋值会自动调用<code>计算属性.set</code></p>
<p><code>set:</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>firstName:&#123;&#123;firstName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>lastName:&#123;&#123;lastName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>全名是:&#123;&#123;fullName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>改姓<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">firstName</span>: <span class="hljs-string">&quot;王&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">lastName</span>: <span class="hljs-string">&quot;花花&quot;</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// changeName 定义一个方法改变 计算属性 fullName 的值</span></span><br><span class="language-javascript">                <span class="hljs-attr">changeName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-comment">// 修改计算属性 fullName 等于李花花</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fullName</span> = <span class="hljs-string">&quot;李花花&quot;</span>;</span><br><span class="language-javascript">                    <span class="hljs-comment">// 上面一句等于触发了 fullName 属性的 setter</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">fullName</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-comment">// getter</span></span><br><span class="language-javascript">                    <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-comment">// setter  直接改变计算属性 fullName 的值就可以触发 setter this.fullName=&#x27;XX&#x27;</span></span><br><span class="language-javascript">                    <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">newName</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> name = newName;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> = name.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// 取新值的第一个字符</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = name.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// 从新值的第二个字符开始取值</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-comment">// 不需要set时，可简写：</span></span><br><span class="language-javascript">                fullname :<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">                <span class="hljs-comment">// ES6中，如果属性值是函数，则可以省略`:function`, 如:</span></span><br><span class="language-javascript">                <span class="hljs-title function_">fullname</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>侦听属性</li>
</ul>
<p>观察和响应 Vue 实例上的数据变动，侦听属性</p>
<p>监控<code>msg</code>，当<code>msg</code>改变是，调用对应的函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- v-on:click 简写为 @click --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleClick(&#x27;hello syl&#x27;)&quot;</span>&gt;</span>改变msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;hello&quot;</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// 改变 msg 的值</span></span><br><span class="language-javascript">          <span class="hljs-attr">handleClick</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = val;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-comment">// watch 监听属性</span></span><br><span class="language-javascript">        <span class="hljs-attr">watch</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// 监听新旧值  监听属性有两个参数，第一个新值，第二个旧值</span></span><br><span class="language-javascript">          <span class="hljs-attr">msg</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">newVal, oldVal</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;新值&quot;</span> + newVal + <span class="hljs-string">&quot;----&quot;</span> + <span class="hljs-string">&quot;旧值&quot;</span> + oldVal);</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>过滤器</li>
</ul>
<p>在 Vue 中我们有一个专门处理数据过滤的东西：过滤器。过滤器可以用在两个地方：<strong>双花括号插值和 v-bind 表达式</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;msg2|getString&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-bind:class</span>=<span class="hljs-string">&quot;msg2|getString&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>// 等价于：<br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-bind:class</span>=<span class="hljs-string">&quot;getstring(msg2)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- toUpperCase   getString  为自定义的过滤器--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>小写转换大写：过滤前：&#123;&#123;msg&#125;&#125; 过滤后： &#123;&#123;msg|toUpperCase&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>去除数字：过滤前：&#123;&#123;msg2&#125;&#125; 过滤后： &#123;&#123;msg2|getString&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;hello&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">msg2</span>: <span class="hljs-string">&quot;1s2y3l&quot;</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-comment">// filters 过滤器选项</span></span><br><span class="language-javascript">        <span class="hljs-attr">filters</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// toUpperCase 定义一个字符串转大写的过滤器</span></span><br><span class="language-javascript">          <span class="hljs-attr">toUpperCase</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> val.<span class="hljs-title function_">toUpperCase</span>();</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-comment">// getString 定义一个获取去除数字的过滤器</span></span><br><span class="language-javascript">          <span class="hljs-attr">getString</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> newVal = <span class="hljs-string">&quot;&quot;</span>;</span><br><span class="language-javascript">            val.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) &#123;</span><br><span class="language-javascript">              <span class="hljs-keyword">if</span> (<span class="hljs-number">9</span> &gt;= item &amp;&amp; item &gt;= <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span>;</span><br><span class="language-javascript">              &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> (newVal += item);</span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> newVal;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h4><h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>非单文件组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    // 使用<br>    <span class="hljs-tag">&lt;<span class="hljs-name">xuexiao</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">xuexiao</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 创建</span></span><br><span class="language-javascript">    <span class="hljs-comment">// const school = Vue.extend(options) 可简写为 const school = options</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> school = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span></span><br><span class="hljs-string"><span class="language-javascript">          &lt;div&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">            &lt;h2&gt;学生姓名：&#123;&#123;studentName&#125;&#125; &lt;/h2&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">            &lt;h2&gt;学生年龄：&#123;&#123;age&#125;&#125; &lt;/h2&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">          &lt;/div&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">        `</span>,<span class="hljs-comment">// template会完全替换xuaxiao对象</span></span><br><span class="language-javascript">        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">studentName</span>: <span class="hljs-string">&quot;张三&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,</span><br><span class="language-javascript">            &#125;;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-comment">// (局部)注册</span></span><br><span class="language-javascript">        <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">xuexiao</span>: school,</span><br><span class="language-javascript">            <span class="hljs-comment">//xuesheng: student,</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>单文件组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;tempalte&gt;<br>    &lt;div&gt;<br><br>    &lt;/div&gt;<br>&lt;/tempalte&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    name: &#x27;&#x27;,<br>    data() &#123;<br>        return &#123;<br>            schoolName: &#x27;&#x27;,<br>            address: &#x27;&#x27;<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        showName() &#123;<br>            alert(this.showName)<br>        &#125;<br>    &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>div&#123;<br>    color: pink;<br>&#125;<br>&lt;/style&gt;<br><br><br>// main.js 入口文件<br>import App from &#x27;./App&#x27;<br><br>new Vue(&#123;<br>    el:&#x27;#root&#x27;,<br>    template: `&lt;App&gt;&lt;/App&gt;`,<br>    components: &#123;App&#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>

<ul>
<li><p>全局组件：<code>Vue.component</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">syl</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">syl</span>&gt;</span><br>Vue.component(&quot;syl&quot;, &#123;<br>  template: &quot;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>实验楼全局组件<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&quot;,<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li><p>局部组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">syl-header</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">syl-header</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mid&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">syl-mid</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">syl-mid</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 头部组件</span></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> childComponent = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;&lt;h2&gt;我是实验楼局部组件header，只有我们父级才能调用&lt;/h2&gt;&quot;</span>,</span><br><span class="language-javascript">      &#125;;</span><br><span class="language-javascript">      <span class="hljs-comment">// 中间部分组件</span></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> childComponent2 = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;&lt;h2&gt;我是实验楼局部组件mid，只有我们父级才能调用&lt;/h2&gt;&quot;</span>,</span><br><span class="language-javascript">      &#125;;</span><br><span class="language-javascript">      <span class="hljs-comment">// header vm</span></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> header = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#header&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-comment">// 子组件必须声明后使用，不然不能起效</span></span><br><span class="language-javascript">        <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-string">&quot;syl-header&quot;</span>: childComponent,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> mid = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#mid&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-comment">// 子组件必须声明后使用，不然不能起效</span></span><br><span class="language-javascript">        <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-string">&quot;syl-mid&quot;</span>: childComponent2,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p>组件的优点就在于能够复用，一次代码编写，整个项目受用。</p>
<p><strong>注意：</strong> 复用组件内的 data 必须是一个函数，如果是一个对象（引用类型），组件与组件间会相互影响，组件数据不能独立管理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&quot;button-counter&quot;</span>, &#123;<br>    <span class="hljs-comment">// data 必须是一个函数不然会影响其他组件</span><br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span>,<br>        &#125;;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;&lt;button @click=&quot;counter++&quot;&gt;&#123;&#123;counter&#125;&#125;&lt;/button&gt;&#x27;</span>,<br>&#125;);<br><span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,<br>&#125;);<br></code></pre></td></tr></table></figure>

<h5 id="通信"><a href="#通信" class="headerlink" title="通信"></a>通信</h5><p>父子：<code>props</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">title-component</span> <span class="hljs-attr">post-title</span>=<span class="hljs-string">&quot;syl1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title-component</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">title-component</span> <span class="hljs-attr">post-title</span>=<span class="hljs-string">&quot;syl2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title-component</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">title-component</span> <span class="hljs-attr">post-title</span>=<span class="hljs-string">&quot;syl3&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title-component</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 注册一个 title 组件，通过传入不同的 title 值，渲染不同的东西</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 组件上 传递的 props 属性名为 kebab-case（短横线分隔命名）的要转换为驼峰命名</span></span><br><span class="language-javascript">      <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&quot;title-component&quot;</span>, &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">props</span>: [<span class="hljs-string">&quot;postTitle&quot;</span>], <span class="hljs-comment">// post-title 转换为驼峰命名</span></span><br><span class="language-javascript">        <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;&lt;p&gt;&#123;&#123;postTitle&#125;&#125;&lt;/p&gt;&quot;</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>子父通信<code>this.$emit(&#39;自定义事件名&#39;，参数)</code></p>
<p>子组件向父组件数据传递套路：</p>
<p>第一步：子组件绑定事件。</p>
<p>第二步：子组件绑定事件触发，使用 $emit 创建自定义事件并传入需要传值给父组件的数据。</p>
<p>第三步：在子组件标签上 用 v-on 绑定自定义事件，在父组件中声明自定义事件处理的方法。</p>
<p>第四步：父组件方法，接受自定义事件传的参数，就完成了整个由下到上的数据流。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">v-on:send-msg</span>=<span class="hljs-string">&quot;getMsg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 定义一个子组件，template 绑定 click 事件</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 当 click 事件触发就使用 emit 自定义一个事件 send-msg，传入参数 “我是子组件请求与你通信”</span></span><br><span class="language-javascript">      <span class="hljs-comment">// $emit(&#x27;send-msg&#x27;,&#x27;我是子组件请求与你通信&#x27;)</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 子组件标签上绑定自定义事件 send-msg，并绑定上父级的方法 getMsg，即可完成了子父组件通信</span></span><br><span class="language-javascript">      <span class="hljs-comment">// &lt;child-component v-on:send-msg=&quot;getMsg&quot;&gt;&lt;/child-component&gt;</span></span><br><span class="language-javascript">      <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&quot;child-component&quot;</span>, &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;button v-on:click=&quot;$emit(&#x27;send-msg&#x27;,&#x27;我是子组件请求与你通信&#x27;)&quot;&gt;Click me&lt;/button&gt;`</span>,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">getMsg</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// 弹出子组件传递的信息</span></span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(msg);</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h5 id="props类型检测"><a href="#props类型检测" class="headerlink" title="props类型检测"></a>props类型检测</h5><p>通常你希望每个 prop 都有指定的值类型。这时，你可以以对象形式列出 prop，这些属性的名称和值分别是 prop 各自的名称和类型</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span></span><br><span class="hljs-tag">        <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;1&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;hello syl&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;you are welcom&quot;</span></span><br><span class="hljs-tag">      &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-handlebars">      // 注册一个子组件</span></span><br><span class="language-xml"><span class="language-handlebars">      Vue.component(&quot;child-component&quot;, &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        // props 对象形式，传递属性值 进行类型检测，在脚手架环境中很有用</span></span><br><span class="language-xml"><span class="language-handlebars">        props: &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">          id: Number,</span></span><br><span class="language-xml"><span class="language-handlebars">          title: String,</span></span><br><span class="language-xml"><span class="language-handlebars">          content: String,</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span><br><span class="language-xml"><span class="language-handlebars">        // 使用 es6 模板字符串书写格式更优美</span></span><br><span class="language-xml"><span class="language-handlebars">        template: `<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>id:</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">id</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>title:</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">title</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>content:</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">content</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>`,</span></span><br><span class="language-xml"><span class="language-handlebars">      &#125;);</span></span><br><span class="language-xml"><span class="language-handlebars">      var app = new Vue(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        el: &quot;#app&quot;,</span></span><br><span class="language-xml"><span class="language-handlebars">      &#125;);</span></span><br><span class="language-xml"><span class="language-handlebars">    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h5 id="动态组件、实例生命周期"><a href="#动态组件、实例生命周期" class="headerlink" title="动态组件、实例生命周期"></a>动态组件、实例生命周期</h5><h3 id="本地应用"><a href="#本地应用" class="headerlink" title="本地应用"></a>本地应用</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script src=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;&lt;/script&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#vue_det&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 或 vm.$mount(&#x27;#vue_det&#x27;)</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 对象式：</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">data</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">site</span>: <span class="hljs-string">&quot;菜鸟教程&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;www.runoob.com&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">alexa</span>: <span class="hljs-string">&quot;10000&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//函数式：</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-attr">site</span>: <span class="hljs-string">&quot;菜鸟教程&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-comment">// 数据变化会触发Vue响应系统, 进而触发这个函数重新执行.</span></span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">details</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-keyword">return</span>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">site</span> + <span class="hljs-string">&quot; - 学的不仅是技术，更是梦想！&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<ul>
<li>初始化：向Vue构造函数中传入一个集合</li>
<li><ul>
<li><p><code>el</code>: 选择器，设置<code>Vue</code>实例挂载（管理）的元素</p>
</li>
<li><p><code>data</code>:  插值数据</p>
</li>
<li><p><code>method</code>:  方法</p>
</li>
</ul>
</li>
<li><code>vm.sute</code>可以这样用</li>
<li><code>vm.$el</code>,  <code>vm.$data</code>  它们都有前缀 $，以便与用户定义的属性区分开来</li>
</ul>
<h3 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h3><h4 id="插值"><a href="#插值" class="headerlink" title="插值"></a>插值</h4><p><code>&#123;&#123; name &#125;&#125;</code></p>
<blockquote>
<p>name 为Vue中data的元素</p>
</blockquote>
<h4 id="v-html、v-text"><a href="#v-html、v-text" class="headerlink" title="v-html、v-text"></a>v-html、v-text</h4><p>用于替换为<code>html</code>代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;div id=<span class="hljs-string">&quot;app2&quot;</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/div&gt;<br><br><span class="hljs-keyword">let</span> app2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app2&#x27;</span>,<br>    <span class="hljs-attr">data</span>: &#123;<br>        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;&lt;h1&gt;菜鸟教程&lt;/h1&gt;&#x27;</span><br>    &#125;<br>&#125;)     <br></code></pre></td></tr></table></figure>

<h4 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h4><ul>
<li>绑定事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;input v-<span class="hljs-attr">on</span>:click=<span class="hljs-string">&quot;doIt&quot;</span>&gt;<br>或：<br>&lt;input @click=<span class="hljs-string">&quot;doIt(p1, p2)&quot;</span>&gt;  <span class="hljs-comment">//自定义参数</span><br>或<br>&lt;input @keyup.<span class="hljs-property">enter</span>=<span class="hljs-string">&quot;sayHi&quot;</span>&gt;   <span class="hljs-comment">//事件修饰符</span><br><br><span class="hljs-keyword">let</span> vm=<span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">data</span>:&#123;<br>        <span class="hljs-attr">food</span>: <span class="hljs-string">&quot;西蓝花&quot;</span>,<br>    &#125;<br>    <span class="hljs-attr">methods</span>:&#123;<br>        <span class="hljs-attr">doIt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">p1, p2</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span><br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<ul>
<li><p>动态的事件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">@[event]=<span class="hljs-string">&#x27;doIt&#x27;</span><br><br>event=<span class="hljs-string">&#x27;click&#x27;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>默认有冒泡，添加<code>.prevent</code>可以阻止冒泡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">@click.<span class="hljs-property">p</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p>键盘事件：</p>
<p>在监听键盘事件时，我们经常需要检查详细的按键。Vue 允许为 <code>v-on</code> 在监听键盘事件时添加按键修饰符</p>
<ul>
<li><p><code>keyup.enter</code></p>
</li>
<li><p><code>click.ctrl</code>同时鼠标左击和按 ctrl 弹出提示 </p>
</li>
<li><p><code>.exact</code> 精确按键修饰符，允许你控制由精确的系统修饰符组合触发的事件。</p>
<ul>
<li><code>click.ctrl</code>即使 Alt 或 Shift 被一同按下时也会触发</li>
<li><code>click.ctrl.exact</code>有且只有 ctrl 键 + 鼠标左键 被按下的时候才触发</li>
</ul>
</li>
<li><p>这些修饰符会限制处理函数仅响应特定的鼠标按钮。</p>
<ul>
<li><p><code>.left</code></p>
</li>
<li><p><code>.right</code></p>
</li>
<li><p><code>.middle</code></p>
</li>
</ul>
</li>
<li></li>
</ul>
<h4 id="v-show、v-if"><a href="#v-show、v-if" class="headerlink" title="v-show、v-if"></a>v-show、v-if</h4><p>根据表达式的真假，切换元素的显示和隐藏</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">v-show=<span class="hljs-string">&quot;isShow&quot;</span><br>v-show=<span class="hljs-string">&quot;age&gt;=18&quot;</span><br><br><span class="hljs-attr">data</span>:&#123;<br>    <span class="hljs-attr">isShow</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">16</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>v-if</code>:  同上，但操作dom元素（转换为注释节点），性能差</p>
<h4 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h4><p>单向数据绑定：<code>v-bind</code></p>
<p>双向数据绑定：<code>v-model</code></p>
<p>&#x3D;&#x3D;属性变量化&#x3D;&#x3D;</p>
<p>设置元素的属性(src,  title,  class)</p>
<p>可以多个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">v-<span class="hljs-attr">bind</span>:src=<span class="hljs-string">&quot;imgSrc&quot;</span><br><br><span class="hljs-attr">data</span>:&#123;<br>    imgSrc=<span class="hljs-string">&quot;   &quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">v-<span class="hljs-attr">bind</span>: <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;isActive ? &#x27;active&#x27; : &#x27;&#x27; &quot;</span><br>v-<span class="hljs-attr">bind</span>: <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;&#123;&#x27;active&#x27;: isActive, &#x27;red-bg&#x27;: isRed&#125;&quot;</span><br><span class="hljs-comment">// active为构建好的类</span><br><span class="hljs-attr">data</span>:&#123;<br>    <span class="hljs-attr">isActive</span>: <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div class=&#x27;c&#x27; :class=&quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><p><code>bind</code>可以是数组</p>
</li>
<li><p>可以同时有动态否认和静态的<code>class</code></p>
</li>
</ul>
<p><code>v-bind</code>可以省略，如：</p>
<p><code>:src=&quot;imgSrc&quot;</code></p>
<p>元素style绑定：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-bind:style</span>=<span class="hljs-string">&quot;&#123;fontSize:size,backgroundColor:bgColor&#125;&quot;</span>&gt;</span>你好，实验楼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">size</span>: <span class="hljs-string">&quot;26px&quot;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">bgColor</span>: <span class="hljs-string">&quot;pink&quot;</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;ul id=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, index) in arr&quot;</span>&gt;</span> </span><br><span class="language-xml">        &#123;&#123;index&#125;&#125;  &#123;&#123; item &#125;&#125; </span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>&lt;/ul&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">var</span> app=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#app&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">data</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">arr</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">objArr</span>:[</span></span><br><span class="language-javascript"><span class="language-xml">                &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jack&#x27;</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">                &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;rose&#x27;</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">            ]</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>v-for</code>一般和<code>:key=&#39;&#39;</code>搭配使用</li>
</ul>
<p>还是由于 JavaScript 的限制，Vue 不能检测对象属性的添加或删除，直接进行 <code>app.userInfo.height=&#39;180cm&#39;</code> 这样操作是不会构成响应式，不会触发视图更新。必须使用 <code>Vue.set(object, key, value)</code> 方法向嵌套对象添加响应式属性</p>
<p>eg.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">set</span>(app.<span class="hljs-property">objArr</span>, <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;andy&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h4 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h4><p>内容只渲染一次，不会改变</p>
<h4 id="v-memo"><a href="#v-memo" class="headerlink" title="v-memo"></a>v-memo</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span>&gt;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>:number[] = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>];<br>&lt;/script&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in arr&quot;</span> <span class="hljs-attr">v-mome</span>=<span class="hljs-string">&quot;[item == 2]&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;&#123; item &#125;&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<ul>
<li>当<code>item!=2</code>时，重新渲染</li>
</ul>
<h5 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h5><p>当vue初始化完成时，这个属性会直接消失</p>
<p>用例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[v-cloak]</span>&#123;<br>    <span class="hljs-attribute">display</span>: none;<br>&#125;<br></code></pre></td></tr></table></figure>

































<h3 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h3><h4 id="组件基础"><a href="#组件基础" class="headerlink" title="组件基础"></a>组件基础</h4><h5 id="监听事件"><a href="#监听事件" class="headerlink" title="监听事件"></a>监听事件</h5><p>子组件可以用<code>$emit</code>来抛出事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div class=&quot;blog-post&quot;&gt;<br>    &lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;<br>    &lt;span&gt;&#123;&#123; content &#125;&#125;&lt;/span&gt;<br>    &lt;button @click=&quot;$emit(&#x27;enlarge-text&#x27;)&quot;&gt;Rnlarge text&lt;/button&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>defineProps([&#x27;title&#x27;, &#x27;content&#x27;])<br>defineEmits([&#x27;enlarge-text&#x27;])<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div :style=&quot;&#123;fontSize: postFontSize + &#x27;em&#x27;&#125;&quot;&gt;<br>    &lt;BlogPost <br>        v-for=&quot;post in posts&quot;<br>        :key=&quot;post.id&quot;<br>        :title=&quot;post.title&quot;<br>        @enlarge-text=&quot;postFontSize+=0.1&quot;&gt;<br>    &lt;/BlogPost&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref &#125; from &#x27;vue&#x27;;<br>import BlogPost from &#x27;./components/BlogPost.vue&#x27;;<br>const posts = ref([<br>  &#123; id: 1, title: &#x27;My journey with Vue&#x27; &#125;,<br>  &#123; id: 2, title: &#x27;Blogging with Vue&#x27; &#125;,<br>  &#123; id: 3, title: &#x27;Why Vue is so fun&#x27; &#125;<br>])<br>const postFontSize=ref(1)<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>描述：</p>
<ol>
<li>子组件中，可以以<code>@click=&quot;$emit(&#39;enlarge-text&#39;)&quot;</code>这样的形式，把点击事件绑定到<code>enlarge-text</code>函数上（官方描述：<em>子组件可以通过调用内置的 <code>$emit</code>方法，通过传入事件名称来抛出一个事件</em>。父组件有<code>@enlarge-text</code>监听，会完成这一事件的效果）</li>
<li>在子组件中，需要使用<code>defineEmits</code>宏来声明需要抛出的事件</li>
</ol>
<h4 id="深入组件"><a href="#深入组件" class="headerlink" title="深入组件"></a>深入组件</h4><h5 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h5><h6 id="全局注册"><a href="#全局注册" class="headerlink" title="全局注册"></a>全局注册</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;createApp&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">const</span> app=<span class="hljs-title function_">createApp</span>(&#123;&#125;)<br>app.<span class="hljs-title function_">component</span>(<br>    <span class="hljs-string">&#x27;MyComponent&#x27;</span>,<br>    &#123;<br>        <span class="hljs-comment">// 实现</span><br>    &#125;<br>)<br></code></pre></td></tr></table></figure>

<p>注册导入的单文件组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;MyComponent&#x27;</span>, <span class="hljs-title class_">MyComponent</span>)<br></code></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 这在当前应用的任意组件中都可用 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ComponentA</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ComponentB</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ComponentC</span>/&gt;</span><br></code></pre></td></tr></table></figure>



<h6 id="局部注册"><a href="#局部注册" class="headerlink" title="局部注册"></a>局部注册</h6><ul>
<li><p>在使用 <code>&lt;script setup&gt;</code> 的单文件组件中，导入的组件可以直接在模板中使用，无需注册</p>
</li>
<li><p>如果没有使用 <code>&lt;script setup&gt;</code>，则需要使用 <code>components</code> 选项来显式注册：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./ComponentA.js&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">components</span>: &#123;<br>    <span class="hljs-title class_">ComponentA</span><br>  &#125;,<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>关于VueComponent：</p>
<p>1.school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，是Vue.extend生成的。*</p>
<p>2.我们只需要写<school/>或<school></school>，Vue解析时会帮我们创建school组件的实例对象，</p>
<p>  即Vue帮我们执行的：new VueComponent(options)。</p>
<p>3.特别注意：每次调用Vue.extend，返回的都是一个全新的VueComponent！！！！</p>
<p>4.关于this指向：</p>
<p>  (1).组件配置中：</p>
<p>​        data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【VueComponent实例对象】。</p>
<p>  (2).new Vue(options)配置中：</p>
<p>​        data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【Vue实例对象】。</p>
<p>5.VueComponent的实例对象，以后简称vc（也可称之为：组件实例对象）。</p>
<p>  Vue的实例对象，以后简称vm。*</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230923160822252.png" srcset="/img/loading.gif" lazyload alt="image-20230923160822252"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">类.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> === 对象.<span class="hljs-property">__proto__</span><br></code></pre></td></tr></table></figure>

<p>他们指向同一个东西</p>
<h3 id="尚硅谷"><a href="#尚硅谷" class="headerlink" title="尚硅谷"></a>尚硅谷</h3><p>文档：<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/">https://v2.cn.vuejs.org/v2/guide/</a></p>
<p>个人笔记：</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.yuque.com/cessstudy/kak11d">https://www.yuque.com/cessstudy/kak11d</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://wekenw.gitee.io/vuedoc/">https://wekenw.gitee.io/vuedoc/</a></p>
</li>
</ul>
<h4 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h4><p>挂载</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">	<span class="hljs-keyword">new</span> <span class="hljs-title function_">vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;尚硅谷&#x27;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">func</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// 这里this的指向是vm或者组件实例对象</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>或者：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;atguigu&quot;</span> &#125;;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">    vm.$mount(<span class="hljs-string">&quot;#root&quot;</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>可以直接通过<code>vm</code>访问<code>data</code>的属性，这是因为<code>data</code>的所有属性都通过<code>Object.defineProperty方法</code>进行了<em>数据代理</em>，代理到了<code>vm</code>上</p>
<p>Object.defineProperty方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> number = <span class="hljs-number">18</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> person = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;张三&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;男&#x27;</span>,</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(person,<span class="hljs-string">&#x27;age&#x27;</span>,&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// value:18,</span></span><br><span class="language-javascript">        <span class="hljs-comment">// enumerable:true, //控制属性是否可以枚举，默认值是false</span></span><br><span class="language-javascript">        <span class="hljs-comment">// writable:true, //控制属性是否可以被修改，默认值是false</span></span><br><span class="language-javascript">        <span class="hljs-comment">// configurable:true //控制属性是否可以被删除，默认值是false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//当有人读取person的age属性时，get函数(getter)就会被调用，且返回值就是age的值</span></span><br><span class="language-javascript">        <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;有人读取age属性了&#x27;</span>)</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> number</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值</span></span><br><span class="language-javascript">        <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>)&#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;有人修改了age属性，且值是&#x27;</span>,value)</span><br><span class="language-javascript">            number = value</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">&lt;script/&gt;</span><br></code></pre></td></tr></table></figure>



<h5 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">//阻止 vue 在启动时生成生产提示。</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">firstName</span>:<span class="hljs-string">&#x27;张&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">lastName</span>:<span class="hljs-string">&#x27;三&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">x</span>:<span class="hljs-string">&#x27;你好&#x27;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">computed</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">fullName</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//get有什么作用？当有人读取fullName时，get就会被调用，且返回值就作为fullName的值</span></span><br><span class="language-javascript">                <span class="hljs-comment">//get什么时候调用？1.初次读取fullName时。2.所依赖的数据发生变化时。</span></span><br><span class="language-javascript">                <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;get被调用了&#x27;</span>)</span><br><span class="language-javascript">                    <span class="hljs-comment">// console.log(this) //此处的this是vm</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">&#x27;-&#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-comment">// //set什么时候调用? 当fullName被修改时。</span></span><br><span class="language-javascript">                <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;set&#x27;</span>,value)</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> arr = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>)</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> = arr[<span class="hljs-number">0</span>]</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = arr[<span class="hljs-number">1</span>]</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>setter</code>：这个函数会在<code>fullName</code>被修改的时候执行。如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变（如修改<code>firstName</code>和<code>lastName</code>）。</li>
<li><code>getter</code>：<code>fullName</code>以来的数据发生变化时被调用</li>
</ul>
<p>计算属性可以只写<code>getter</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">computed</span>:&#123;<br>	<span class="hljs-title function_">fullName2</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">&quot;-&quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;<br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="监视属性"><a href="#监视属性" class="headerlink" title="监视属性"></a>监视属性</h5><p>首先指定要监视的值，当这个值放生改变时，会自动执行指定的函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>今天天气&#123;&#123; val &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;change&quot;</span>&gt;</span>change<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">flag</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">val</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> ? <span class="hljs-string">&quot;炎热&quot;</span> : <span class="hljs-string">&quot;凉爽&quot;</span>;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">change</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">watch</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">flag</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">            <span class="hljs-title function_">handler</span>(<span class="hljs-params">newVal, oldVal</span>) &#123;</span><br><span class="language-javascript">              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;修改了!&quot;</span>);</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">watch</span>: &#123;<br>    <span class="hljs-title function_">flag</span>(<span class="hljs-params">newVal, oldVal</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;修改了!&quot;</span>);<br>    &#125;,<br>&#125;,<br></code></pre></td></tr></table></figure>

<p>有的功能，<code>watch</code>可以完成，但<code>computed</code>不一定能完成</p>
<ol>
<li><p>所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm 或 组件实例对象。</p>
</li>
<li><p>所有不被Vue所管理的函数（定时器的回调函数、ajax的回调函数等、Promise的回调函数），最好写成箭头函数，这样this的指向才是vm 或 组件实例对象。</p>
</li>
</ol>
<h5 id="添加一个属性"><a href="#添加一个属性" class="headerlink" title="添加一个属性"></a>添加一个属性</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>, <span class="hljs-string">&#x27;sex&#x27;</span>, <span class="hljs-string">&#x27;男&#x27;</span>)<br></code></pre></td></tr></table></figure>



<h5 id="过滤属性"><a href="#过滤属性" class="headerlink" title="过滤属性"></a>过滤属性</h5><p>要用到管道运算符</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> &#123;&#123;111111 | timeFormater&#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">filters</span>: &#123;</span><br><span class="language-javascript">             <span class="hljs-title function_">timeFormater</span>(<span class="hljs-params">time</span>) &#123;</span><br><span class="language-javascript">             <span class="hljs-keyword">return</span> time / <span class="hljs-number">1000</span>;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h5 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h5><p>函数式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      大大大：<br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-big</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">n</span>: <span class="hljs-number">99</span>,</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">directives</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">big</span>(<span class="hljs-params">element, binding</span>) &#123;</span><br><span class="language-javascript">          element.<span class="hljs-property">innerText</span>=binding.<span class="hljs-property">value</span> *<span class="hljs-number">10</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><code>big</code> 函数调用时机：</p>
<ol>
<li>指令与元素成功绑定时（一上来）</li>
<li>指令所在的模块被重新解析时</li>
</ol>
<p>对象式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">directives</span>:&#123;<br>    <span class="hljs-attr">fbind</span>:&#123;<br>        <span class="hljs-comment">//指令与元素成功绑定时（一上来）</span><br>        <span class="hljs-title function_">bind</span>(<span class="hljs-params">element,binding</span>)&#123;<br>            element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span><br>        &#125;,<br>		<span class="hljs-comment">//指令所在元素被插入页面时</span><br>        <span class="hljs-title function_">inserted</span>(<span class="hljs-params">element,binding</span>)&#123;<br>	        element.<span class="hljs-title function_">focus</span>()<br>        &#125;,<br>        <span class="hljs-comment">//指令所在的模板被重新解析时</span><br>		<span class="hljs-title function_">update</span>(<span class="hljs-params">element,binding</span>)&#123;<br>            element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span><br>		&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>全局指令：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;fbind&#x27;</span>,&#123;<br>    <span class="hljs-comment">//指令与元素成功绑定时（一上来）</span><br>    <span class="hljs-title function_">bind</span>(<span class="hljs-params">element,binding</span>)&#123;<br>        element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span><br>    &#125;,<br>    <span class="hljs-comment">//指令所在元素被插入页面时</span><br>    <span class="hljs-title function_">inserted</span>(<span class="hljs-params">element,binding</span>)&#123;<br>        element.<span class="hljs-title function_">focus</span>()<br>    &#125;,<br>    <span class="hljs-comment">//指令所在的模板被重新解析时</span><br>    <span class="hljs-title function_">update</span>(<span class="hljs-params">element,binding</span>)&#123;<br>        element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>



<h4 id="组件基础-1"><a href="#组件基础-1" class="headerlink" title="组件基础"></a>组件基础</h4><h5 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">school</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">school</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">stu</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">stu</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-handlebars">    const school = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        template:`</span></span><br><span class="language-xml"><span class="language-handlebars">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>姓名：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>地址：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">address</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">        `,</span></span><br><span class="language-xml"><span class="language-handlebars">        data()&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">                name: &#x27;阿巴阿巴&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">                address: &#x27;唐宁街一号&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">            &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars">    const stu = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        template:`</span></span><br><span class="language-xml"><span class="language-handlebars">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>姓名：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>性别：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">sex</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">        `,</span></span><br><span class="language-xml"><span class="language-handlebars">        data()&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">                name: &#x27;张三&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">                sex: &#x27;男&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">            &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars">    const vm = new Vue(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        el:&#x27;#root&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">        // 局部注册</span></span><br><span class="language-xml"><span class="language-handlebars">        components:&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            school,</span></span><br><span class="language-xml"><span class="language-handlebars">            stu</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p>组件需要复用，故<code>data</code>应写成函数，并把数据包裹在返回值中</p>
<p>全局组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> hello = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>(&#123;<br>	<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;我是hello&#x27;</span>, <span class="hljs-comment">// 指定在开发者工具中的名字</span><br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;&#123;&#123; hello &#125;&#125;&lt;/div&gt;`</span>,<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">hello</span>: <span class="hljs-string">&#x27;hello&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;)<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;hello&#x27;</span>, hello)<br></code></pre></td></tr></table></figure>

<p><code>const hello = Vue.extend(&#123;&#125;)</code>可以简写为：<code>const hello = &#123;&#125;</code></p>
<h5 id="props"><a href="#props" class="headerlink" title="props"></a>props</h5><p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;StudentCom name=&quot;张三&quot; sex=&quot;男&quot; age=&quot;18&quot;&gt;&lt;/StudentCom&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import StudentCom from &#x27;./components/StudentCom.vue&#x27;<br><br>export default &#123;<br>  name: &#x27;App&#x27;,<br>  components: &#123;<br>    StudentCom<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>子组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;<br>        &lt;h2&gt;学生姓名：&#123;&#123; name &#125;&#125;&lt;/h2&gt;<br>        &lt;h2&gt;学生性别：&#123;&#123; sex &#125;&#125;&lt;/h2&gt;<br>        &lt;h2&gt;学生年龄：&#123;&#123; age &#125;&#125;&lt;/h2&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    name: &#x27;StudentCom&#x27;,<br>    data() &#123;<br>        return &#123;<br>            msg:&#x27;我是一个普通的学生&#x27;<br>        &#125;<br>    &#125;,<br>    props: [&#x27;name&#x27;, &#x27;age&#x27;, &#x27;sex&#x27;]<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>上面父组件的传参写法中，传出的只能是字符串，</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">StudentCom</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">&quot;张三&quot;</span> <span class="hljs-attr">:sex</span>=<span class="hljs-string">&quot;男&quot;</span> <span class="hljs-attr">:age</span>=<span class="hljs-string">&quot;18&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">StudentCom</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>这样，传出去的是表达式</p>
<p>对于子组件，这些数据是<strong>只读</strong>的</p>
<h5 id="mixin"><a href="#mixin" class="headerlink" title="mixin"></a>mixin</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;<br>        &lt;h2&gt;学生姓名：&#123;&#123; name &#125;&#125;&lt;/h2&gt;<br>        &lt;h2&gt;学生性别：&#123;&#123; sex &#125;&#125;&lt;/h2&gt;<br>        &lt;h2&gt;学生年龄：&#123;&#123; age &#125;&#125;&lt;/h2&gt;<br>        &lt;button @click=&quot;showName&quot;&gt;点击展示姓名&lt;/button&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;hunhe&#125; from &#x27;../minin.js&#x27;<br>export default &#123;<br>    name: &#x27;StudentCom&#x27;,<br>    data() &#123;<br>        return &#123;<br>            msg:&#x27;我是一个普通的学生&#x27;<br>        &#125;<br>    &#125;,<br>    mixins:[hunhe],<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// mixin.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> hunhe = &#123;<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">showName</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span>)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;泥嚎呀&#x27;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>完成属性的复用</p>
<p>全局混合：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>(hunhe)<br></code></pre></td></tr></table></figure>

<h5 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h5><p>定义：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// src/plugins.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>	<span class="hljs-title function_">install</span>(<span class="hljs-params">Vue,x,y,z</span>)&#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x,y,z)<br>		<span class="hljs-comment">//全局过滤器</span><br>		<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-string">&#x27;mySlice&#x27;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)&#123;<br>			<span class="hljs-keyword">return</span> value.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>)<br>		&#125;)<br><br>		<span class="hljs-comment">//定义全局指令</span><br>		<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;fbind&#x27;</span>,&#123;<br>			<span class="hljs-comment">//指令与元素成功绑定时（一上来）</span><br>			<span class="hljs-title function_">bind</span>(<span class="hljs-params">element,binding</span>)&#123;<br>				element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span><br>			&#125;,<br>			<span class="hljs-comment">//指令所在元素被插入页面时</span><br>			<span class="hljs-title function_">inserted</span>(<span class="hljs-params">element,binding</span>)&#123;<br>				element.<span class="hljs-title function_">focus</span>()<br>			&#125;,<br>			<span class="hljs-comment">//指令所在的模板被重新解析时</span><br>			<span class="hljs-title function_">update</span>(<span class="hljs-params">element,binding</span>)&#123;<br>				element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span><br>			&#125;<br>		&#125;)<br><br>		<span class="hljs-comment">//定义混入</span><br>		<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>(&#123;<br>			<span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>				<span class="hljs-keyword">return</span> &#123;<br>					<span class="hljs-attr">x</span>:<span class="hljs-number">100</span>,<br>					<span class="hljs-attr">y</span>:<span class="hljs-number">200</span><br>				&#125;<br>			&#125;,<br>		&#125;)<br><br>		<span class="hljs-comment">//给Vue原型上添加一个方法（vm和vc就都能用了）</span><br>		<span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hello</span> = <span class="hljs-function">()=&gt;</span>&#123;<span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;你好啊&#x27;</span>)&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> plugins <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./plugins&#x27;</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(plugins, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure>



<h5 id="传参"><a href="#传参" class="headerlink" title="传参"></a>传参</h5><p>父：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div id=&quot;root&quot;&gt;<br>    &lt;div class=&quot;todo-container&quot;&gt;<br>      &lt;div class=&quot;todo-wrap&quot;&gt;<br>        &lt;MyHeader :addTodo=&quot;addTodo&quot; /&gt;<br>        &lt;MyList :todos=&quot;todos&quot; :deleteTodo=&quot;deleteTodo&quot; :checkTodo=&quot;checkTodo&quot; /&gt;<br>        &lt;MyFooter :todos=&quot;todos&quot; :changeDone=&quot;changeDone&quot; :clearAll=&quot;clearAll&quot;/&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import MyHeader from &#x27;./components/MyHeader.vue&#x27;;<br>import MyList from &quot;./components/MyList.vue&quot;;<br>import MyFooter from &#x27;./components/MyFooter.vue&#x27;;<br><br>export default &#123;<br>  name: &#x27;App&#x27;,<br>  data() &#123;<br>    return &#123;<br>      todos: [<br>        &#123; id: &#x27;001&#x27;, title: &#x27;抽烟&#x27;, done: true &#125;,<br>        &#123; id: &#x27;002&#x27;, title: &#x27;喝酒&#x27;, done: false &#125;,<br>        &#123; id: &#x27;003&#x27;, title: &#x27;烫头&#x27;, done: true &#125;,<br>      ],<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    addTodo(todo) &#123;<br>      this.todos.unshift(todo)<br>    &#125;,<br>    checkTodo(id) &#123;<br>      this.todos.forEach((obj) =&gt; &#123;<br>        if (obj.id === id) obj.done = !obj.done<br>      &#125;)<br>    &#125;,<br>    deleteTodo(id) &#123;<br>      // this.todos.splice(this.todos.forEach(todo =&gt; todo.id === id), 1)<br>      this.todos = this.todos.filter(obj =&gt; obj.id !== id)<br>    &#125;,<br>    changeDone(done) &#123;<br>      this.todos.forEach(obj =&gt; &#123; obj.done = done &#125;)<br>    &#125;,<br>    clearAll() &#123;<br>      this.todos = this.todos.filter(obj =&gt; !obj.done)<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    MyHeader,<br>    MyList,<br>    MyFooter,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;todo-footer&quot; v-show=&quot;numTodo&quot;&gt;<br>    &lt;label&gt;<br>      &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot;/&gt;<br>    &lt;/label&gt;<br>    &lt;span&gt;<br>      &lt;span&gt;已完成&#123;&#123; doneTodo &#125;&#125; &lt;/span&gt; / 全部&#123;&#123; numTodo &#125;&#125;<br>    &lt;/span&gt;<br>    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;claerAllDone&quot;&gt;清除已完成任务&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &#x27;MyFooter&#x27;,<br>  props: [&#x27;todos&#x27;, &#x27;changeDone&#x27;, &#x27;clearAll&#x27;],<br>  methods: &#123;<br>    claerAllDone() &#123;<br>      this.clearAll()<br>    &#125;<br>  &#125;,<br>  computed: &#123;<br>    isAll: &#123;<br>      get() &#123;<br>        return this.doneTodo === this.numTodo &amp;&amp; this.numTodo<br>      &#125;,<br>      set(value) &#123;<br>        this.changeDone(value)<br>      &#125;<br>    &#125;,<br>    numTodo() &#123;<br>      return this.todos.length<br>    &#125;,<br>    doneTodo() &#123;<br>      // return this.todos.filter(obj=&gt;obj.done).length<br>      // console.log(this.todos.reduce((pre, now) =&gt; &#123;  pre + (now.done ? 1 : 0) &#125;, 1));<br>      return this.todos.reduce((pre, now) =&gt; pre + (now.done ? 1 : 0), 0)<br>    &#125;,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h5 id="emit传参"><a href="#emit传参" class="headerlink" title="$emit传参"></a>$emit传参</h5><p>自定义事件</p>
<p>父<code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;aSchool @atguigu=&quot;demo&quot;/&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import aSchool from &#x27;./components/aSchool.vue&#x27;<br>export default &#123;<br>  name: &#x27;App&#x27;,<br>  data()&#123;<br>    return&#123;<br>      msg:&#x27;泥嚎&#x27;,<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    demo(name) &#123;<br>      console.log(&#x27;传过来了: &#x27;, name);<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    aSchool,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>子：<code>aSchool.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;div&gt;学校名称&#123;&#123; name &#125;&#125;&lt;/div&gt;<br>        &lt;div&gt;学校地址&#123;&#123; address &#125;&#125;&lt;/div&gt;<br>        &lt;button @click=&quot;send&quot;&gt;发送&lt;/button&gt;<br>        &lt;button @click=&quot;revoke&quot;&gt;取消&lt;/button&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br><br>export default &#123;<br>    name: &#x27;aSchool&#x27;,<br>    data() &#123;<br>        return &#123;<br>            name: &#x27;张飒&#x27;,<br>            address:&#x27;纽约&#x27;<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        send() &#123;<br>            this.$emit(&#x27;atguigu&#x27;, this.name)<br>        &#125;,<br>        // 解绑<br>        revoke() &#123;<br>            this.$off(&#x27;atguigu&#x27;)<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h5 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h5><p>适用于任意组件之间通信</p>
<ol>
<li><p>安装：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-title function_">beforeCreate</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$bus</span>=<span class="hljs-variable language_">this</span><br>    &#125;,<br>    ......<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
<li><p>使用：</p>
<ol>
<li><p>接收数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">methods</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">demo</span>(<span class="hljs-params">data</span>)&#123;......&#125;<br>&#125;<br>    <br><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$bus</span>.$on(<span class="hljs-string">&#x27;xxx&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">demo</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>this.$bus.$emit(&#39;xxx&#39;, 数据)</code></p>
</li>
</ol>
</li>
<li><p>销毁：在<code>beforeDestroy</code>中用<code>$off</code>解绑当前组件所用到的事件</p>
</li>
</ol>
<h5 id="消息订阅与发布"><a href="#消息订阅与发布" class="headerlink" title="消息订阅与发布"></a>消息订阅与发布</h5><p>使用<code>pubsub-js</code>库</p>
<p>任意组件之间调用函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;div&gt;学校名称&#123;&#123; name &#125;&#125;&lt;/div&gt;<br>        &lt;div&gt;学校地址&#123;&#123; address &#125;&#125;&lt;/div&gt;<br>        &lt;button @click=&quot;send&quot;&gt;发送&lt;/button&gt;<br>        &lt;button @click=&quot;revoke&quot;&gt;取消&lt;/button&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import pubsub from &#x27;pubsub-js&#x27;<br>export default &#123;<br>    name: &#x27;aSchool&#x27;,<br>    data() &#123;<br>        return &#123;<br>            name: &#x27;张飒&#x27;,<br>            address:&#x27;纽约&#x27;<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        send() &#123;<br>            this.$emit(&#x27;atguigu&#x27;, this.name)<br>        &#125;,<br>        // 解绑<br>        revoke() &#123;<br>            this.$off(&#x27;atguigu&#x27;)<br>        &#125;<br>    &#125;,<br>    mounted() &#123;<br>        this.pubId= pubsub.subscribe(&#x27;hello&#x27;, function (num,a) &#123;<br>            console.log(&#x27;发出了订阅请求&#x27;, num,a);<br>        &#125;)<br>    &#125;,<br>    beforeDestroy() &#123;<br>        pubsub.unsubscribe(this.pubId)<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;div&gt;学校名称&#123;&#123; name &#125;&#125;&lt;/div&gt;<br>        &lt;div&gt;学校地址&#123;&#123; address &#125;&#125;&lt;/div&gt;<br>        &lt;button @click=&quot;send&quot;&gt;发送&lt;/button&gt;<br>        &lt;button @click=&quot;revoke&quot;&gt;取消&lt;/button&gt;<br>        &lt;button @click=&quot;sendPub&quot;&gt;发布&lt;/button&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import pubsub from &#x27;pubsub-js&#x27;<br>export default &#123;<br>    name: &#x27;aSchool&#x27;,<br>    data() &#123;<br>        return &#123;<br>            name: &#x27;张飒&#x27;,<br>            address:&#x27;纽约&#x27;<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        send() &#123;<br>            this.$emit(&#x27;atguigu&#x27;, this.name)<br>        &#125;,<br>        // 解绑<br>        revoke() &#123;<br>            this.$off(&#x27;atguigu&#x27;)<br>        &#125;,<br>        sendPub() &#123;<br>            pubsub.publish(&#x27;hello&#x27;, 666)<br>        &#125;<br>    &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h5 id="nextTick"><a href="#nextTick" class="headerlink" title="$nextTick"></a>$nextTick</h5><ol>
<li>语法：<code>this.$nextTick(回调函数)</code></li>
<li>作用：在下一次DOM更新结束后执行其指定的回调</li>
<li>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在<code>nextTick</code>所指定的回调函数中执行</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">inputT</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<h5 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h5><h6 id="1"><a href="#1" class="headerlink" title="1"></a>1</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>	&lt;div&gt;<br>		&lt;button @click=&quot;isShow = !isShow&quot;&gt;显示/隐藏&lt;/button&gt;<br>		&lt;transition name=&quot;hello&quot; appear&gt;<br>			&lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;<br>		&lt;/transition&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>	export default &#123;<br>		name:&#x27;MyTest&#x27;,<br>		data() &#123;<br>			return &#123;<br>				isShow:true<br>			&#125;<br>		&#125;,<br>	&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>	h1&#123;<br>		background-color: orange;<br>	&#125;<br><br>	.hello-enter-active&#123;<br>		animation: atguigu 0.5s linear;<br>	&#125;<br><br>	.hello-leave-active&#123;<br>		animation: atguigu 0.5s linear reverse;<br>	&#125;<br><br>	@keyframes atguigu &#123;<br>		from&#123;<br>			transform: translateX(-100%);<br>		&#125;<br>		to&#123;<br>			transform: translateX(0px);<br>		&#125;<br>	&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h6 id="2"><a href="#2" class="headerlink" title="2"></a>2</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>	&lt;div&gt;<br>		&lt;button @click=&quot;isShow = !isShow&quot;&gt;显示/隐藏&lt;/button&gt;<br>		&lt;transition-group name=&quot;hello&quot; appear&gt;<br>			&lt;h1 v-show=&quot;!isShow&quot; key=&quot;1&quot;&gt;你好啊！&lt;/h1&gt;<br>			&lt;h1 v-show=&quot;isShow&quot; key=&quot;2&quot;&gt;尚硅谷！&lt;/h1&gt;<br>		&lt;/transition-group&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>	export default &#123;<br>		name:&#x27;MyTest&#x27;,<br>		data() &#123;<br>			return &#123;<br>				isShow:true<br>			&#125;<br>		&#125;,<br>	&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>	h1&#123;<br>		background-color: orange;<br>	&#125;<br>	/* 进入的起点、离开的终点 */<br>	.hello-enter,.hello-leave-to&#123;<br>		transform: translateX(-100%);<br>	&#125;<br>	.hello-enter-active,.hello-leave-active&#123;<br>		transition: 0.5s linear;<br>	&#125;<br>	/* 进入的终点、离开的起点 */<br>	.hello-enter-to,.hello-leave&#123;<br>		transform: translateX(0);<br>	&#125;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>离开时触发：</p>
<p><code>v-leave</code>, <code>v-leave-active</code>, <code>v-leave-to</code></p>
</li>
<li><p>进入时触发：</p>
<p><code>v-enter</code>, <code>v-enter-active</code>, <code>v-enter-to</code></p>
</li>
</ul>
<h4 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h4><p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/">https://vuex.vuejs.org/zh/</a></p>
<h5 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h5><p><code>./src/store/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>);<br><br><span class="hljs-keyword">const</span> actions = &#123;<br>  <span class="hljs-comment">//   add(context, value) &#123;</span><br>  <span class="hljs-comment">//     context.commit(&quot;ADD&quot;, value);</span><br>  <span class="hljs-comment">//   &#125;,</span><br>  <span class="hljs-comment">//   subtract(context, value) &#123;</span><br>  <span class="hljs-comment">//     context.commit(&quot;SUBTRACT&quot;, value);</span><br>  <span class="hljs-comment">//   &#125;,</span><br>  <span class="hljs-title function_">addOdd</span>(<span class="hljs-params">context, value</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;context: &quot;</span>, context);<br>    <span class="hljs-keyword">if</span> (context.<span class="hljs-property">state</span>.<span class="hljs-property">sum</span> % <span class="hljs-number">2</span>) context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;ADD&quot;</span>, value);<br>  &#125;,<br>  <span class="hljs-title function_">addWait</span>(<span class="hljs-params">context, value</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;ADD&quot;</span>, value);<br>    &#125;, <span class="hljs-number">500</span>);<br>  &#125;,<br>&#125;;<br><br><span class="hljs-keyword">const</span> mutations = &#123;<br>  <span class="hljs-title function_">ADD</span>(<span class="hljs-params">state, value</span>) &#123;<br>    state.<span class="hljs-property">sum</span> += value;<br>  &#125;,<br>  <span class="hljs-title function_">SUBTRACT</span>(<span class="hljs-params">state, value</span>) &#123;<br>    state.<span class="hljs-property">sum</span> -= value;<br>  &#125;,<br>&#125;;<br><span class="hljs-keyword">const</span> state = &#123;<br>  <span class="hljs-attr">sum</span>: <span class="hljs-number">0</span>,<br>&#125;;<br><br><span class="hljs-keyword">const</span> getters = &#123;<br>  <span class="hljs-title function_">bigSum</span>(<span class="hljs-params">state</span>) &#123;<br>    <span class="hljs-keyword">return</span> state.<span class="hljs-property">sum</span> * <span class="hljs-number">10</span>;<br>  &#125;,<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  actions,<br>  mutations,<br>  state,<br>  getters,<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><code>./src/main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span>;<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>  store,<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p><code>./src/App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;MyCount&gt;&lt;/MyCount&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import MyCount from &#x27;./components/MyCount.vue&#x27;;<br><br>export default &#123;<br>  name: &#x27;App&#x27;,<br><br>  components: &#123;<br>    MyCount,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>button &#123;<br>  margin-left: 10px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><code>./src/components/MyCount.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h1&gt;当前求和为：&#123;&#123; $store.state.sum &#125;&#125;&lt;/h1&gt;<br>        &lt;h2&gt;他的十倍为：&#123;&#123; $store.getters.bigSum &#125;&#125;&lt;/h2&gt;<br>        &lt;select v-model.number=&quot;n&quot;&gt;<br>            &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;<br>            &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;<br>            &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;<br>        &lt;/select&gt;<br>        &lt;button @click=&quot;increment&quot;&gt;+&lt;/button&gt;<br>        &lt;button @click=&quot;decrement&quot;&gt;-&lt;/button&gt;<br>        &lt;button @click=&quot;incrementOdd&quot;&gt;当前求和为奇数再加&lt;/button&gt;<br>        &lt;button @click=&quot;incrementWait&quot;&gt;等一等再加&lt;/button&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br><br>export default &#123;<br>    name: &#x27;MyCount&#x27;,<br>    data() &#123;<br>        return &#123;<br>            n: 1,<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        increment() &#123;<br>            console.log(&quot;this: &quot;, this);<br>            this.$store.commit(&#x27;ADD&#x27;, this.n)<br>        &#125;,<br>        decrement() &#123;<br>            this.$store.commit(&#x27;SUBTRACT&#x27;, this.n)<br>        &#125;,<br>        incrementOdd() &#123;<br>            this.$store.dispatch(&#x27;addOdd&#x27;, this.n)<br>        &#125;,<br>        incrementWait() &#123;<br>            this.$store.dispatch(&#x27;addWait&#x27;, this.n)<br>        &#125;,<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<p>一个更轻松的写法，定义别名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h1&gt;当前求和为：&#123;&#123; $store.state.sum &#125;&#125;&lt;/h1&gt;<br>        &lt;h2&gt;他的十倍为：&#123;&#123; $store.getters.bigSum &#125;&#125;&lt;/h2&gt;<br>        &lt;select v-model.number=&quot;n&quot;&gt;<br>            &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;<br>            &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;<br>            &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;<br>        &lt;/select&gt;<br>        &lt;button @click=&quot;increment&quot;&gt;+&lt;/button&gt;<br>        &lt;button @click=&quot;decrement&quot;&gt;-&lt;/button&gt;<br>        &lt;button @click=&quot;incrementOdd&quot;&gt;当前求和为奇数再加&lt;/button&gt;<br>        &lt;button @click=&quot;incrementWait&quot;&gt;等一等再加&lt;/button&gt;<br>        &lt;hr&gt;<br>        &lt;div&gt;&#123;&#123; he &#125;&#125;, &#123;&#123; xuexiao &#125;&#125;, &#123;&#123; kemu &#125;&#125;, &#123;&#123; shibei &#125;&#125;&lt;/div&gt;<br>        &lt;div&gt;&#123;&#123; sum&#125;&#125;, &#123;&#123; school &#125;&#125;, &#123;&#123; subject &#125;&#125;, &#123;&#123; bigSum &#125;&#125;&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;mapState, mapGetters&#125; from &#x27;vuex&#x27;<br>export default &#123;<br>    name: &#x27;MyCount&#x27;,<br>    data() &#123;<br>        return &#123;<br>            n: 1,<br>        &#125;<br>    &#125;,<br>    computed: &#123;<br>        ...mapState(&#123; he: &#x27;sum&#x27;, xuexiao: &#x27;school&#x27;, kemu: &#x27;subject&#x27; &#125;),<br>        ...mapState([&#x27;sum&#x27;, &#x27;school&#x27;, &#x27;subject&#x27;]),<br>        ...mapGetters(&#123;shibei:&#x27;bigSum&#x27;&#125;),<br>        ...mapGetters([&#x27;shibei&#x27;]),<br>    &#125;,<br>    methods: &#123;<br>        increment() &#123;<br>            console.log(&quot;this: &quot;, this);<br>            this.$store.commit(&#x27;ADD&#x27;, this.n)<br>        &#125;,<br>        decrement() &#123;<br>            this.$store.commit(&#x27;SUBTRACT&#x27;, this.n)<br>        &#125;,<br>        incrementOdd() &#123;<br>            this.$store.dispatch(&#x27;addOdd&#x27;, this.n)<br>        &#125;,<br>        incrementWait() &#123;<br>            this.$store.dispatch(&#x27;addWait&#x27;, this.n)<br>        &#125;,<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><code>Mutations</code>和<code>Actions</code>也可以映射：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h1&gt;当前求和为：&#123;&#123; $store.state.sum &#125;&#125;&lt;/h1&gt;<br>        &lt;h2&gt;他的十倍为：&#123;&#123; $store.getters.bigSum &#125;&#125;&lt;/h2&gt;<br>        &lt;select v-model.number=&quot;n&quot;&gt;<br>            &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;<br>            &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;<br>            &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;<br>        &lt;/select&gt;<br>        &lt;button @click=&quot;increment(n)&quot;&gt;+&lt;/button&gt;<br>        &lt;button @click=&quot;decrement(n)&quot;&gt;-&lt;/button&gt;<br>        &lt;button @click=&quot;incrementOdd(n)&quot;&gt;当前求和为奇数再加&lt;/button&gt;<br>        &lt;button @click=&quot;incrementWait(n)&quot;&gt;等一等再加&lt;/button&gt;<br>        &lt;hr&gt;<br>        &lt;div&gt;&#123;&#123; he &#125;&#125;, &#123;&#123; xuexiao &#125;&#125;, &#123;&#123; kemu &#125;&#125;, &#123;&#123; shibei &#125;&#125;&lt;/div&gt;<br>        &lt;div&gt;&#123;&#123; sum&#125;&#125;, &#123;&#123; school &#125;&#125;, &#123;&#123; subject &#125;&#125;, &#123;&#123; bigSum &#125;&#125;&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;mapState, mapGetters, mapActions, mapMutations&#125; from &#x27;vuex&#x27;<br>export default &#123;<br>    name: &#x27;MyCount&#x27;,<br>    data() &#123;<br>        return &#123;<br>            n: 1,<br>        &#125;<br>    &#125;,<br>    computed: &#123;<br>        ...mapState(&#123; he: &#x27;sum&#x27;, xuexiao: &#x27;school&#x27;, kemu: &#x27;subject&#x27; &#125;),<br>        ...mapState([&#x27;sum&#x27;, &#x27;school&#x27;, &#x27;subject&#x27;]),<br>        ...mapGetters(&#123;shibei:&#x27;bigSum&#x27;&#125;),<br>        ...mapGetters([&#x27;bigSum&#x27;]),<br>    &#125;,<br>    methods: &#123;<br>        ...mapMutations(&#123;increment:&#x27;ADD&#x27;, decrement:&#x27;SUBTRACT&#x27;&#125;),<br>        ...mapActions(&#123; incrementOdd: &#x27;addOdd&#x27;, incrementWait: &#x27;addWait&#x27; &#125;)<br>        // increment() &#123;<br>        //     console.log(&quot;this: &quot;, this);<br>        //     this.$store.commit(&#x27;ADD&#x27;, this.n)<br>        // &#125;,<br>        // decrement() &#123;<br>        //     this.$store.commit(&#x27;SUBTRACT&#x27;, this.n)<br>        // &#125;,<br>        // incrementOdd() &#123;<br>        //     this.$store.dispatch(&#x27;addOdd&#x27;, this.n)<br>        // &#125;,<br>        // incrementWait() &#123;<br>        //     this.$store.dispatch(&#x27;addWait&#x27;, this.n)<br>        // &#125;,<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h5 id="蓝桥"><a href="#蓝桥" class="headerlink" title="蓝桥"></a>蓝桥</h5><p>引入：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/vuex&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 导入Vuex包</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span></span><br><span class="language-javascript"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">//创建store对象</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// store中存放的就是全局共享的数据</span></span><br><span class="language-javascript">    <span class="hljs-attr">state</span>: &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">0</span>&#125;,</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">h</span>(app),<span class="hljs-comment">//渲染app和组件</span></span><br><span class="language-javascript">    router,<span class="hljs-comment">//挂载路由</span></span><br><span class="language-javascript">    <span class="hljs-comment">// 将创建的共享数据对象，挂载到Vue实例中</span></span><br><span class="language-javascript">    <span class="hljs-comment">// 所有的组件，就可以直接总store中获取全局的数据</span></span><br><span class="language-javascript">    store</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在一个模块化的打包系统中，我们必须显式地通过 <code>Vue.use()</code> 来安装 Vuex：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;<br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>);<br></code></pre></td></tr></table></figure>

<p>Vuex 中有五个核心概念，它们分别是 <a target="_blank" rel="noopener" href="https://v3.vuex.vuejs.org/zh/guide/state.html">State</a>、<a target="_blank" rel="noopener" href="https://v3.vuex.vuejs.org/zh/guide/getters.html">Getters</a>、<a target="_blank" rel="noopener" href="https://v3.vuex.vuejs.org/zh/guide/mutations.html">Mutations</a>、<a target="_blank" rel="noopener" href="https://v3.vuex.vuejs.org/zh/guide/actions.html">Actions</a> 和 <a target="_blank" rel="noopener" href="https://v3.vuex.vuejs.org/zh/guide/modules.html">Modules</a>。</p>
<p>首先，在 <code>main.js</code> 文件中写入以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App.vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>; <span class="hljs-comment">// 导入 Vuex</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>); <span class="hljs-comment">// 使用 Vuex，让 Vuex 可以访问到 Vue</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span>;<br><br><span class="hljs-comment">// 创建 Store 实例</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  <span class="hljs-attr">state</span>: &#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 计数器的初始值</span><br>  &#125;,<br>&#125;);<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  store, <span class="hljs-comment">// 注入 Store</span><br>  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>&#125;).$mount(<span class="hljs-string">&quot;#app&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>有同学可能会问：为啥不叫 vuex 而是 store 呢？🤔</p>
<p>这是因为，Vuex 应用的核心就是 store（仓库）。它是一个用于存储组件共享状态（state）的容器，就像一个小型的数据仓库。它所有的功能和操作都是用于处理这个仓库中的状态而存在的，所以我们在创建 Vuex 配置的时候都是以 store 命名。</p>
<p>接下来，我们在 <code>App.vue</code> 中将计数器的状态展示出来，在文件中写入以下代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;App&quot;</span>,</span><br><span class="language-javascript">    <span class="hljs-comment">// 通过计算属性来访问 count</span></span><br><span class="language-javascript">    <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">count</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>来这里我们就可以在页面上访问到 count 的数据了，当前页面会显示 0。</p>
<p>接下来，我们要实现点击按钮计数的功能，每点一次按钮数据 +1。</p>
<p>在 <code>App.vue</code> 文件中定义一个按钮，新增代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--绑定一个点击事件，用 increment 来执行 count++ 的逻辑--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$store.commit(&#x27;increment&#x27;)&quot;</span>&gt;</span>++<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>我们在 <code>main.js</code> 文件中增加 <code>mutations</code>，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  <span class="hljs-comment">// 此处省略 ...</span><br>  <span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-title function_">increment</span>(<span class="hljs-params">state</span>) &#123;<br>      state.<span class="hljs-property">count</span>++; <span class="hljs-comment">// 执行 count++ 的操作</span><br>    &#125;,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>计数器的功能就实现啦～ 🎉 效果如下：</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/6166336bf2d9cde9377a48e254cb9099-0.gif" srcset="/img/loading.gif" lazyload alt="图片描述"></p>
<p>到此我们已经实现了一个最简单的 Vuex 状态管理，从上面的使用我们可以看出 <code>state</code> 就是用来存储和初始化状态。</p>
<p>通过上面简单的示例，我们知道了 Vuex 主要是用来存储并管理组件共享状态的。</p>
<p>有时候我们需要向后台发出一些异步请求，我们不能直接在 <code>mutations</code> 里进行操作，这时就可以在 <code>actions</code> 中定义一些异步操作。</p>
<p>下面我们来模拟一下异步操作，在页面上新增一个按钮，触发 <code>count--</code> 的操作。在 <code>App.vue</code> 中新增以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$store.dispatch(&#x27;decrement&#x27;)&quot;</span>&gt;</span>--<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>注意哦！！！ Actions 是通过 <code>store.dispatch</code> 方法来触发 <code>actions</code> 更新 <code>state</code> 状态。</p>
</blockquote>
<p>在 <code>main.js</code> 文件中新增以下内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-title function_">decrement</span>(<span class="hljs-params">state</span>) &#123;<br>      state.<span class="hljs-property">count</span>--;<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-title function_">decrement</span>(<span class="hljs-params">&#123; commit &#125;</span>) &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-comment">// 通过 commit 交给 mutations 去处理</span><br>        <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;decrement&quot;</span>);<br>      &#125;, <span class="hljs-number">500</span>);<br>    &#125;,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>到这里我们 <code>count--</code> 的功能也实现了，效果如下：</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/23828431d3d026838a875127d37f4ca2-0.gif" srcset="/img/loading.gif" lazyload alt="图片描述"></p>
<p>&#x3D;&#x3D;actions 与 mutations 的区别&#x3D;&#x3D;</p>
<p><code>actions</code> 类似于 <code>mutations</code>，不同的是：</p>
<ul>
<li><code>actions</code> 中的更新函数最终仍是通过调用 <code>mutations</code> 中的函数来更新状态的，不能通过它直接变更状态。</li>
<li>与 <code>mutations</code> 不同，<code>actions</code> 中可以包含任意异步操作。</li>
</ul>
<p>关于 <code>mutations</code>、<code>actions</code> 等的用法还有其它形式，这些在官网上都有详细的 API，大家可以根据<a target="_blank" rel="noopener" href="https://next.vuex.vuejs.org/zh/guide/actions.html">官网 API</a> 对它们进行更多更深入的了解，这里就不再一一细说了。</p>
<p><code>getters</code> 可以帮助我们缓存数据。</p>
<p>我们增加一个每次计数增加两倍的功能，在 <code>main.js</code> 中新增以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">getters</span>: &#123;<br>    <span class="hljs-title function_">doubleCount</span>(<span class="hljs-params">state</span>) &#123;<br>      <span class="hljs-keyword">return</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>然后在页面上获取数据，在 <code>App</code> 文件中新增以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;$store.getters.doubleCount&#125;&#125;<br></code></pre></td></tr></table></figure>

<p>这样，当点击 ++ 按钮时，计数会以乘 2 的形式增加。效果如下：</p>
<p><a src="https://vuex.vuejs.org/zh/guide/">Vuex官方文档</a></p>
<p>你不能直接改变 store 中的状态。改变 store 中的状态的唯一途径就是显式地<strong>提交 (commit) mutation</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><br><span class="hljs-comment">// 创建一个新的 store 实例</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(&#123;<br>  state () &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    increment (state) &#123;<br>      state.<span class="hljs-property">count</span>++<br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(&#123; <span class="hljs-comment">/* 根组件 */</span> &#125;)<br><br><span class="hljs-comment">// 将 store 实例作为插件安装</span><br>app.<span class="hljs-title function_">use</span>(store)<br></code></pre></td></tr></table></figure>

<p>现在，你可以通过 <code>store.state</code> 来获取状态对象，并通过 <code>store.commit</code> 方法触发状态变更：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;increment&#x27;</span>)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(store.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>) <span class="hljs-comment">// -&gt; 1</span><br></code></pre></td></tr></table></figure>

<p>在 Vue 组件中， 可以通过 <code>this.$store</code> 访问store实例。现在我们可以从组件的方法提交一个变更：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">methods</span>: &#123;<br>  <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;increment&#x27;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>组件之间共享数据的方式</p>
<ul>
<li>父向子传值：<code>v-bind</code>属性绑定</li>
<li>子向父传值：<code>v-on</code>事件绑定</li>
<li>兄弟组件之间共享数据：<code>EventBus</code><ul>
<li><code>$on</code>接收数据的那个组件</li>
<li><code>$emit</code>发送数据的按个组件</li>
</ul>
</li>
</ul>
<h6 id="State"><a href="#State" class="headerlink" title="State"></a>State</h6><p>State提供唯一的数据源，所有的共享数据都要放到state中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>    <span class="hljs-attr">state</span>: &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,&#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>组件访问state中数据：</p>
<ul>
<li><code>this.$store.state.全局数据名称</code>  template实例中可以省掉<code>this</code></li>
<li><img src="image-20230325165358147.png" srcset="/img/loading.gif" lazyload width=700px></li>
</ul>
<img src="image-20230325170321186.png" srcset="/img/loading.gif" lazyload width=700px>

<img src='image-20230327210304577.png' width =700px >







<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><h5 id="基础-1"><a href="#基础-1" class="headerlink" title="基础"></a>基础</h5><p><code>./src/router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 该文件专门用于创建整个应用的路由器</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span>;<br><span class="hljs-comment">//引入组件</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyAbout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../pages/MyAbout&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyHome</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../pages/MyHome&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyNews</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../pages/MyNews.vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyMessage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../pages/MyMessage.vue&quot;</span>;<br><br><span class="hljs-comment">//创建并暴露一个路由器</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;<br>  <span class="hljs-attr">routes</span>: [<br>    &#123;<br>      <span class="hljs-attr">bane</span>:<span class="hljs-string">&#x27;guanyu&#x27;</span><br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/about&quot;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">MyAbout</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">MyHome</span>,<br>      <span class="hljs-attr">children</span>: [<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;news&quot;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">MyNews</span>,<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;message&quot;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">MyMessage</span>,<br>        &#125;,<br>      ],<br>    &#125;,<br>  ],<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><code>./src/main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./router&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>  <span class="hljs-attr">router</span>: router,<br>&#125;).$mount(<span class="hljs-string">&quot;#app&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><code>./src/pages/Myhome.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>	&lt;div&gt;<br>		&lt;h2&gt;Home组件内容&lt;/h2&gt;<br>		&lt;div&gt;<br>			&lt;ul class=&quot;nav nav-tabs&quot;&gt;<br>				&lt;li&gt;<br>					&lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;<br>				&lt;/li&gt;<br>				&lt;li&gt;<br>					&lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; to=&quot;/home/message&quot;&gt;Message&lt;/router-link&gt;<br>				&lt;/li&gt;<br>			&lt;/ul&gt;<br>			&lt;ul&gt;<br>				&lt;router-view&gt;&lt;/router-view&gt;<br>			&lt;/ul&gt;<br>		&lt;/div&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; RouterView &#125; from &#x27;vue-router&#x27;;<br><br>export default &#123;<br>    name: &#x27;MyHome&#x27;,<br>    components: &#123; RouterView &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h5 id="query参数"><a href="#query参数" class="headerlink" title="query参数"></a>query参数</h5><p>发送：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;</span></span><br><span class="hljs-string"><span class="hljs-tag">	path:&#x27;/home/message/detail&#x27;,</span></span><br><span class="hljs-string"><span class="hljs-tag">	query:&#123;</span></span><br><span class="hljs-string"><span class="hljs-tag">		id:m.id,</span></span><br><span class="hljs-string"><span class="hljs-tag">        title:m.title</span></span><br><span class="hljs-string"><span class="hljs-tag">    &#125;</span></span><br><span class="hljs-string"><span class="hljs-tag">&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>接收：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;ul&gt;<br>        &lt;li&gt;消息编号：&#123;&#123; $route.query.id &#125;&#125;&lt;/li&gt;<br>        &lt;li&gt;消息标题：&#123;&#123; $route.query.title &#125;&#125;&lt;/li&gt;<br>    &lt;/ul&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    name: &#x27;MyDetail&#x27;,<br>    mounted() &#123;<br>        console.log(this.$route)<br>    &#125;,<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h5 id="params参数"><a href="#params参数" class="headerlink" title="params参数"></a>params参数</h5><p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;xiangxi&quot;</span>,<br>	<span class="hljs-attr">path</span>: <span class="hljs-string">&quot;detail/:id/:title&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">MyDetail</span>,<br>&#125;,<br></code></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;</span></span><br><span class="hljs-string"><span class="hljs-tag">	// path:&#x27;/home/message/detail&#x27;,</span></span><br><span class="hljs-string"><span class="hljs-tag">	name: &#x27;xiangxi&#x27;,</span></span><br><span class="hljs-string"><span class="hljs-tag">	params: &#123;</span></span><br><span class="hljs-string"><span class="hljs-tag">	id: m.id,</span></span><br><span class="hljs-string"><span class="hljs-tag">	title: m.title</span></span><br><span class="hljs-string"><span class="hljs-tag">	&#125;</span></span><br><span class="hljs-string"><span class="hljs-tag">&#125;&quot;</span>&gt;</span>&#123;&#123; m.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>读取：</p>
<p><code>&#123;&#123; $route.params.id &#125;&#125;</code></p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20231004162939423.png" srcset="/img/loading.gif" lazyload alt="image-20231004162939423"></p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20231004165105155.png" srcset="/img/loading.gif" lazyload alt="image-20231004165105155"></p>
<ol>
<li>this.$router.push(path): 相当于点击路由链接(可以返回到当前路由界面)</li>
<li>this.$router.replace(path): 用新路由替换当前路由(不可以返回到当前路由界面)</li>
<li>this.$router.back(): 请求(返回)上一个记录路由</li>
<li>this.$router.go(-1): 请求(返回)上一个记录路由</li>
<li>this.$router.go(1): 请求下一个记录路由</li>
</ol>
<h5 id="缓存-keep-alive"><a href="#缓存-keep-alive" class="headerlink" title="缓存: keep-alive"></a>缓存: keep-alive</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">:include</span>=<span class="hljs-string">&quot;[&#x27;MyNews&#x27;, &#x27;MyMessage&#x27;]&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>新的生命周期：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">activated</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;News组件被激活了&#x27;</span>)<br>	<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;@&#x27;</span>)<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> -= <span class="hljs-number">0.01</span><br>		<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> = <span class="hljs-number">1</span><br>	&#125;,<span class="hljs-number">16</span>)<br>&#125;,<br><span class="hljs-title function_">deactivated</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;News组件失活了&#x27;</span>)<br>	<span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>)<br>&#125;,<br></code></pre></td></tr></table></figure>



<h5 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h5><p>对路由进行权限控制</p>
<h6 id="全局守卫"><a href="#全局守卫" class="headerlink" title="全局守卫"></a>全局守卫</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 全局前置守卫：初始化时、每次路由切换前执行</span><br>router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>) =&gt;</span> &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeEach&#x27;</span>,to,<span class="hljs-keyword">from</span>)<br>	<span class="hljs-keyword">if</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">isAuth</span>)&#123; <span class="hljs-comment">// 判断当前路由是否需要进行权限控制</span><br>		<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;school&#x27;</span>) === <span class="hljs-string">&#x27;atguigu&#x27;</span>)&#123; <span class="hljs-comment">// 权限控制的具体规则</span><br>			<span class="hljs-title function_">next</span>()	<span class="hljs-comment">// 放行</span><br>		&#125;<span class="hljs-keyword">else</span>&#123;<br>			<span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;暂无权限查看&#x27;</span>)<br>		&#125;<br>	&#125;<span class="hljs-keyword">else</span>&#123;<br>		<span class="hljs-title function_">next</span>()	<span class="hljs-comment">// 放行</span><br>	&#125;<br>&#125;)<br><br><span class="hljs-comment">// 全局后置守卫：初始化时、每次路由切换后执行</span><br>router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;afterEach&#x27;</span>,to,<span class="hljs-keyword">from</span>)<br>	<span class="hljs-keyword">if</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>)&#123; <br>		<span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> <span class="hljs-comment">//修改网页的title</span><br>	&#125;<span class="hljs-keyword">else</span>&#123;<br>		<span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;vue_test&#x27;</span><br>	&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h6 id="独享守卫"><a href="#独享守卫" class="headerlink" title="独享守卫"></a>独享守卫</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">beforeEnter</span>(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>)&#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeEnter&#x27;</span>,to,<span class="hljs-keyword">from</span>)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;school&#x27;</span>) === <span class="hljs-string">&#x27;atguigu&#x27;</span>)&#123;<br>        <span class="hljs-title function_">next</span>()<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;暂无权限查看&#x27;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h6 id="组件内守卫"><a href="#组件内守卫" class="headerlink" title="组件内守卫"></a>组件内守卫</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//进入守卫：通过路由规则，进入该组件时被调用</span><br>beforeRouteEnter (to, <span class="hljs-keyword">from</span>, next) &#123;... <span class="hljs-title function_">next</span>()&#125;,<br><br><span class="hljs-comment">//离开守卫：通过路由规则，离开该组件时被调用</span><br>beforeRouteLeave (to, <span class="hljs-keyword">from</span>, next) &#123;... <span class="hljs-title function_">next</span>()&#125;,<br></code></pre></td></tr></table></figure>



<h5 id="蓝桥-1"><a href="#蓝桥-1" class="headerlink" title="蓝桥"></a>蓝桥</h5><p>引入：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">https://unpkg.com/vue-router@2.0.0/dist/vue-router.js<br></code></pre></td></tr></table></figure>

<p>我们通过一个单页面应用来看看 Vue-Router 的使用，其基本步骤如下所示：</p>
<ul>
<li>使用 <code>router-link</code> 组件来导航，其通过 <code>to</code> 属性来指定跳转链接（这相当于 HTML 中的 a 标签）。</li>
<li>使用 <code>router-view</code> 组件定义路由出口，路由匹配到的组件将会渲染到此处。</li>
<li>使用 <code>const routes = [&#123; path, component &#125;]</code> 来定义路由（路径和组件名）。</li>
<li>使用 <code>const router = new VueRouter(&#123;&#125;)</code> 来创建路由实例，在其中传入上一步定义的路由配置 <code>routes</code>。</li>
<li>创建和挂载根实例，在 <code>new Vue</code> 中挂载上一步创建的路由实例 <code>router</code>。</li>
</ul>
<p>步骤清楚了，我们来举个例子吧～</p>
<p>使用以下命令获取 Vue 和 Vue-Router 文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://labfile.oss.aliyuncs.com/courses/10532/vue-router.js<br></code></pre></td></tr></table></figure>

<p>新建一个 <code>index.html</code> 文件，在文件中写入以下内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;vue.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;vue-router.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>路由的使用<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 使用 router-link 组件来导航 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/hot&quot;</span>&gt;</span>热门<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/class&quot;</span>&gt;</span>分类<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 路由出口 --&gt;</span><br>      <span class="hljs-comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = &#123; <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;&lt;div&gt;首页&lt;/div&gt;&quot;</span> &#125;;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> <span class="hljs-title class_">Hot</span> = &#123; <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;&lt;div&gt;热门&lt;/div&gt;&quot;</span> &#125;;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> <span class="hljs-title class_">Class</span> = &#123; <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;&lt;div&gt;分类&lt;/div&gt;&quot;</span> &#125;;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 定义路由</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> routes = [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/hot&quot;</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Hot</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/class&quot;</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Class</span> &#125;,</span><br><span class="language-javascript">      ];</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 创建 router 实例，然后传 routes 配置</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;</span><br><span class="language-javascript">        routes,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 创建和挂载根实例</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        router,</span><br><span class="language-javascript">      &#125;).$mount(<span class="hljs-string">&quot;#app&quot;</span>);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>效果如下所示：</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/c60ce628cc702cc13e22bfb688fbf9e0-0.gif" srcset="/img/loading.gif" lazyload alt="图片描述"></p>
<h4 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// vue.config.js</span><br><span class="hljs-keyword">const</span> &#123; defineConfig &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@vue/cli-service&quot;</span>);<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">transpileDependencies</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">// devServer: &#123;</span><br>  <span class="hljs-comment">//   proxy: &quot;http://localhost:5000&quot;,</span><br>  <span class="hljs-comment">// &#125;,</span><br>  <span class="hljs-attr">devServer</span>: &#123;<br>    <span class="hljs-attr">proxy</span>: &#123;<br>      <span class="hljs-string">&quot;/api&quot;</span>: &#123;<br>        <span class="hljs-attr">target</span>: <span class="hljs-string">&quot;http://localhost:5000&quot;</span>, <span class="hljs-comment">// 当有前缀&#x27;api&#x27;时，把请求发送到5000端口</span><br>        <span class="hljs-attr">pathRewrite</span>: &#123; <span class="hljs-string">&#x27;^/api&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125;,    <span class="hljs-comment">// 去掉前缀&#x27;api&#x27;，才能正常查询5000服务器的资源</span><br>        <span class="hljs-attr">ws</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- App.vue --&gt;<br>&lt;template&gt;<br>	&lt;div&gt;<br>		&lt;button @click=&quot;getStudents&quot;&gt;点击发送请求&lt;/button&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import axios from &quot;axios&quot;;<br>export default &#123;<br>	name: &#x27;App&#x27;,<br>	methods: &#123;<br>		getStudents() &#123;<br>			axios.get(&#x27;http://localhost:8080/api/students&#x27;).then(<br>				resopnse =&gt; &#123;<br>					console.log(&#x27;成功了&#x27;, resopnse);<br>				&#125;,<br>				error =&gt;&#123;<br>					console.log(&#x27;失败了&#x27;, error);<br>				&#125;<br>			)<br>		&#125;<br>	&#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure>











<ul>
<li>基于<code>promise</code>的网络请求库</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>axios.get(&quot;地址?key=value &amp; key2=value2&quot;).then(function(resopnse)&#123;&#125;, function(err)&#123;&#125;);<br>axios.post(&quot;地址&quot;,&#123;key:value, key2:value2&#125;).then(function(resopnse)&#123;&#125;, function(err)&#123;&#125;);<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;获取笑话&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getJoke&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123;joke&#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">joke</span>: <span class="hljs-string">&quot;很好笑的笑话&quot;</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">getJoke</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">let</span> that=<span class="hljs-variable language_">this</span>;      <span class="hljs-comment">//axios回调函数中this的值已经改变，需要提前保存</span></span><br><span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;https://autumnfish.cn/api/joke&quot;</span>).<span class="hljs-title function_">then</span>(</span><br><span class="language-javascript">                    <span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">                        that.<span class="hljs-property">joke</span> = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                )</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>通用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//-------------------get-----------------------//</span><br><span class="hljs-title function_">axios</span>(&#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;get&quot;</span>,<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;xxx&quot;</span>,<br>  <span class="hljs-attr">cache</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">params</span>: &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,<br>  &#125;,<br>  <span class="hljs-attr">headers</span>: <span class="hljs-string">&quot;xxx&quot;</span>,<br>&#125;);<br><span class="hljs-comment">//-------------------post-----------------------//</span><br><span class="hljs-title function_">axios</span>(&#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;xxx&quot;</span>,<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">firstName</span>: <span class="hljs-string">&quot;Tom&quot;</span>,<br>    <span class="hljs-attr">lastName</span>: <span class="hljs-string">&quot;Sun&quot;</span>,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>其中需要注意的是，<code>get</code> 和 <code>post</code> 请求中向后端传递参数的配置项名字不同：<code>get</code> 请求的需要使用 <code>params</code>，<code>post</code> 请求用于发送数据的为 <code>data</code>。</p>
<h2 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h2><h3 id="小满zs"><a href="#小满zs" class="headerlink" title="小满zs"></a>小满zs</h3><h4 id="数组更新检测"><a href="#数组更新检测" class="headerlink" title="数组更新检测"></a>数组更新检测</h4><p>一些操作数组的方法，编译会检测，从而会促使视图更新。</p>
<ul>
<li>变异方法</li>
</ul>
<ul>
<li><code>push()</code></li>
<li><code>pop()</code></li>
<li><code>shift()</code>  删除并返回第一个</li>
<li><code>unshift()</code>  向开头添加多个元素，返回新长度</li>
<li><code>splice()</code>   删除 &#x2F; 删除并添加</li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul>
<p>上面这些数组操作方法，会直接改变原始数组称为变异方法，会促使视图自动更新。</p>
<ul>
<li>替换数组</li>
</ul>
<p>学了 JavaScript 标准对象库，都知道有些数组方法是不直接改变原数组的，这里称它们为非变异方法，例如：filter()、slice()、concat()，它们都是返回一个新数组，那么，在 Vue 中使用到这些方法，怎么样才能促使视图更新呢？我们就必须使用数组替换法，将非变异方法返回的新数组直接赋值给的旧数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">nav</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">nav</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure>

<ul>
<li>注意</li>
</ul>
<p>由于 JavaScript 的限制，Vue 不能检测以下变动的数组：</p>
<ol>
<li>当你利用索引直接设置一个项时，例如：<code>vm.items[indexOfItem] = newValue</code>。</li>
<li>当你修改数组的长度时，例如：<code>vm.items.length = newLength</code>。</li>
</ol>
<p>例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">items</span>: [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>],<br>  &#125;,<br>&#125;);<br>app.<span class="hljs-property">items</span>[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;x&quot;</span>; <span class="hljs-comment">// 不是响应性的</span><br>app.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// 不是响应性的</span><br></code></pre></td></tr></table></figure>

<p>上去直接这样改值操作是没有问题的，但是不是响应式的，并不能触发视图更新，需要用其他方法代替。</p>
<p>例如这样的操作 <code>app.items[indexOfItem] = newValue</code> ，可以用以下两种代替。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Vue.set</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">set</span>(vm.<span class="hljs-property">items</span>, indexOfItem, newValue);<br><span class="hljs-comment">// Array.prototype.splice</span><br>vm.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(indexOfItem, <span class="hljs-number">1</span>, newValue);<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html">// 不加括号<br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;number in oddNumber&quot;</span>&gt;</span>&#123;&#123;number&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>computed: &#123;<br>          // 计算 numberArray 中为奇数的 oddNumber 奇数数组<br>          oddNumber: function () &#123;<br>            return this.numberArray.filter(function (number) &#123;<br>              return number % 2 === 1;<br>            &#125;);<br>          &#125;<br>//加括号<br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;number in getOddNumber()&quot;</span>&gt;</span>&#123;&#123;number&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>methods: &#123;<br>          // 定一个一个获取数组内奇数的方法 filter 数组对象的过滤方法<br>          getOddNumber: function () &#123;<br>            return this.numberArray.filter(function (number) &#123;<br>              return number % 2 === 1;<br>            &#125;);<br>          &#125;,<br>        &#125;<br></code></pre></td></tr></table></figure>

<h4 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h4><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/examples/#form-bindings">https://cn.vuejs.org/examples/#form-bindings</a></p>
<h5 id="v-module"><a href="#v-module" class="headerlink" title="v-module"></a>v-module</h5><ul>
<li>只适用于input标签</li>
<li>便捷地设置和获取表单元素的值</li>
<li>绑定的数据会和表单元素值相关联</li>
<li>绑定的数据 &lt;–&gt; 表单元素的值：双向绑定</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;div id=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    <span class="hljs-keyword">import</span> &#123;ref&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br>    &lt;input type=<span class="hljs-string">&quot;text&quot;</span> v-model=<span class="hljs-string">&quot;message&quot;</span> /&gt;<br>&lt;/div&gt;<br><br><span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>    <span class="hljs-attr">data</span>: &#123;<br>        <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;黑馬程序員&quot;</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h5 id="常用表单元素"><a href="#常用表单元素" class="headerlink" title="常用表单元素"></a>常用表单元素</h5><table>
<thead>
<tr>
<th>元素</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>input[type&#x3D;*]</td>
<td>文本输入框</td>
</tr>
<tr>
<td>textarea</td>
<td>多行文本</td>
</tr>
<tr>
<td>radio</td>
<td>单选按钮</td>
</tr>
<tr>
<td>checkbox</td>
<td>复选框</td>
</tr>
<tr>
<td>select</td>
<td>选择框</td>
</tr>
</tbody></table>
<p>&#x3D;&#x3D;注意&#x3D;&#x3D;</p>
<p><strong>注意一</strong>：<code>v-model</code> 会忽略所有表单元素的  <code>value</code>、<code>checked</code>、<code>selected</code> 特性的初始值而总是将 Vue 实例的数据作为数据来源。直接给元素 value 赋值不会生效的，你应该通过 JavaScript 在组件的 <code>data</code> 选项中声明初始值。</p>
<p><strong>注意二</strong>：<code>v-model</code> 在内部使用不同的属性为不同的输入元素并抛出不同的事件，具体体现我们在表单 <strong>修饰符小节</strong>，给大家说明：</p>
<ul>
<li><p>text 和 textarea 元素使用 <code>value</code> 属性和 <code>input</code> 事件（内部监听 input 事件）；</p>
</li>
<li><p>checkbox 和 radio 使用 <code>checked</code> 属性和 <code>change</code> 事件（内部监听 change 事件）；</p>
</li>
<li><p>select 字段将 <code>value</code> 作为 prop 并将 <code>change</code> 作为事件（内部监听 change 事件）。</p>
<p><strong>说明：</strong> change 和 input 区别就是，input 实时更新数据，change 不是实时更新</p>
</li>
</ul>
<h5 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h5><p>将单选按钮绑定到同一个 picked，即可完成数据绑定</p>
<p>当第一个单选被选中 picked 的值为第一个单选按钮的 value，</p>
<p>同样当第二个单选被选中 picked 的值为第二个单选按钮的 value。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 将单选按钮绑定到同一个 picked --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;one&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;One&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;picked&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;one&quot;</span>&gt;</span>One<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;two&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Two&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;picked&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;two&quot;</span>&gt;</span>Two<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Picked: &#123;&#123; picked &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">picked</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">          &#125;;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h5 id="复选框"><a href="#复选框" class="headerlink" title="复选框"></a>复选框</h5><p>复选框绑定的是一个布尔值（true or false），同样在复选框元素上使用 <code>v-model</code> 指令，在实例 data 中声明 checked，即可完成复选框数据的双向绑定。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;checked&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;checkbox&quot;</span>&gt;</span>&#123;&#123; checked &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 绑定布尔值</span></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">checked</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><code>v-module=&#39;check&#39;</code>表示</p>
<ul>
<li><p>当选中时，把<code>check = value</code>绑定</p>
</li>
<li><p>如果不存在<code>value</code>，则<code>check</code>为布尔值</p>
</li>
</ul>
<h5 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h5><p>&#x3D;&#x3D;lazy&#x3D;&#x3D;</p>
<p>开始介绍表单处理时，我们说了几点注意，不同的元素，使用的值不同，抛出的事件也不同。</p>
<p>可能开发中，我们不需要数据实时更新，那么，我们怎么将 input 事件与 change 事件替换，</p>
<p>可以使用 <strong>.lazy</strong> 修饰符，可以将抛出事件由 input 改为 change，使表单元素惰性更新，不实时更新。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!--使用 .lazy 修饰符将文本框 抛出的事件改为 change 事件，不再实时更新，只有文本框失去焦点才更新数据 惰性更新 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.lazy</span>=<span class="hljs-string">&quot;msg&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&quot;#app&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;hello&quot;</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>只有文本框失去焦点才更新数据</strong></p>
<p>&#x3D;&#x3D;number&#x3D;&#x3D;</p>
<p>自动将用户的输入值转为数值类型</p>
<p>即使在  <code>type=&quot;number&quot;</code> 时，HTML 输入元素的值也会返回字符串（默认）</p>
<p>&#x3D;&#x3D;trim&#x3D;&#x3D;</p>
<p>过滤首尾空格</p>
<h4 id="响应式修改"><a href="#响应式修改" class="headerlink" title="响应式修改"></a>响应式修改</h4><p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230902171945781.png" srcset="/img/loading.gif" lazyload alt="image-20230902171945781"></p>
<h4 id="Ref全家桶"><a href="#Ref全家桶" class="headerlink" title="Ref全家桶"></a>Ref全家桶</h4><h5 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script  lang=&#x27;ts&#x27;&gt;<br>export default &#123;<br>  data()&#123;<br>    return&#123;<br>      age:18<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>以前，只有<code>age:18</code>这样的才是响应式对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;&#123;&#123; Man &#125;&#125;&lt;/div&gt;<br>&lt;button @click=&quot;change&quot;&gt;&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref &#125; from &#x27;vue&#x27;<br>type M = &#123;<br>  name:string<br>&#125;<br>const Man = ref&lt;M&gt;(&#123; name: &#x27;小满&#x27; &#125;)<br><br>function change() &#123;<br>  Man.value.name = &#x27;慢慢慢&#x27;<br>  console.log(Man);<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>可以这样</p>
<ul>
<li><p><code>ref()</code>构造函数返回的对象有一个<code>value</code>属性，指向他的内部值</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230902210547501.png" srcset="/img/loading.gif" lazyload alt="image-20230902210547501"></p>
</li>
</ul>
<h5 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a>isRef</h5><p><code>isRef(Man)</code>：判断一个对象是不是<code>ref</code>对象</p>
<ul>
<li>isRef: 检查一个值是否为一个 ref 对象</li>
<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>
<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>
<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>
</ul>
<h5 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a>shallowRef</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; shallowRef &#125; from &#x27;vue&#x27;<br>const Man = shallowRef(&#123; name: &#x27;小满&#x27; &#125;)<br><br>function change() &#123;<br>  Man.value = &#123;<br>    name:&#x27;慢慢慢&#x27;<br>  &#125;<br>  console.log(Man);<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p><code>shallowRef</code>是浅层的响应式，属性需要直接挂载到<code>Man.value</code>上，它的响应式只到<code>.value</code>上</p>
<p>（内部会更新，但不会响应式地渲染到页面上）</p>
<p><strong>注意：</strong><code>ref</code>和<code>shallowRef</code>不可以混写，否则会影响<code>shallowRef</code>，造成视图的更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, shallowRef &#125; from &#x27;vue&#x27;<br>const Man = ref(&#123; name: &#x27;小满&#x27; &#125;)<br>const Man2 = shallowRef(&#123; name: &#x27;小满&#x27; &#125;)<br><br>function change() &#123;<br>  Man.value.name = &#x27;慢慢慢&#x27;;<br>  Man2.value = &#x27;慢慢慢&#x27;;<br>  console.log(Man);<br>  console.log(Man2);<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h5 id="triggerRef"><a href="#triggerRef" class="headerlink" title="triggerRef"></a>triggerRef</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, shallowRef, triggerRef &#125; from &#x27;vue&#x27;<br>const Man2 = shallowRef(&#123; name: &#x27;小满&#x27; &#125;)<br><br>function change() &#123;<br>  triggerRef(Man2);<br>  Man2.value.name = &#x27;慢慢慢&#x27;;<br>  console.log(Man2);<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p><code>triggerRef</code>会强制更新<code>shallowRef</code>对象</p>
<h5 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h5><ul>
<li><p>自定义ref </p>
</li>
<li><p>customRef 是个工厂函数要求我们返回一个对象 并且实现 get 和 set 适合去做防抖之类的</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, reactive, onMounted, shallowRef, customRef &#125; from &#x27;vue&#x27;<br><br>function myRef&lt;T = any&gt;(value: T) &#123;<br>  let timer:any;<br>  return customRef((track, trigger) =&gt; &#123;<br>    return &#123;<br>      get() &#123;<br>        track()<br>        return value<br>      &#125;,<br>      set(newVal) &#123;<br>        clearTimeout(timer)<br>        timer =  setTimeout(() =&gt; &#123;<br>          console.log(&#x27;触发了set&#x27;)<br>          value = newVal<br>          trigger()<br>        &#125;,500)<br>      &#125;<br>    &#125;<br>  &#125;)<br>&#125;<br><br>const name = myRef&lt;string&gt;(&#x27;小满&#x27;)<br>const change = () =&gt; &#123;<br>  name.value = &#x27;大满&#x27;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><p><code>ref</code>可以获取dom属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div ref=&quot;div&quot;&gt;小满Ref&lt;/div&gt;<br>  &lt;hr&gt;<br>  &lt;div ref=&quot;dom&quot;&gt;我是dom&lt;/div&gt;<br>  &lt;hr&gt;<br>  &lt;button @click=&quot;change&quot;&gt;修改 customRef&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, reactive, onMounted, shallowRef, customRef &#125; from &#x27;vue&#x27;<br>const dom = ref&lt;HTMLDivElement&gt;()<br><br>const change = () =&gt; &#123;<br>  console.log(dom.value?.innerHTML);<br>&#125;<br><br>&lt;/script&gt;<br>&lt;style scoped&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><code>ref=&#39;name&#39;</code>和<code>name=ref()</code>的name要求一致</p>
<h4 id="reactive全家桶"><a href="#reactive全家桶" class="headerlink" title="reactive全家桶"></a>reactive全家桶</h4><h5 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h5><ul>
<li><code>ref</code>支持所有类型，<code>reactive</code>只支持引用类型</li>
<li><code>ref</code>取值赋值都需要通过<code>.value</code>，<code>reactive</code>不需要</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in list&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;ts&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123;reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">let</span> list = reactive&lt;string[]&gt;([])</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"></span>) =&gt; [</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> res = [<span class="hljs-string">&quot;EDG&quot;</span>, <span class="hljs-string">&#x27;REW&#x27;</span>];</span></span><br><span class="language-javascript"><span class="language-xml">    list = res;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(list);</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;, <span class="hljs-number">2000</span>)</span></span><br><span class="language-javascript"><span class="language-xml">]</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>这样并不能把res的内容渲染到list里面。因为<code>list</code>是<code>reactive proxy</code>值，不能直接复制，否则会破坏响应式对象</p>
<p>但是可以<code>push</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">list.<span class="hljs-title function_">push</span>(..<span class="hljs-property">res</span>)<br></code></pre></td></tr></table></figure>

<h5 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;reactive, readonly&#125; from &#x27;vue&#x27;<br>let obj = reactive(&#123; name: &#x27;小满&#x27; &#125;);<br>const read = readonly(obj)<br>// read.name=&#x27;sss&#x27;  // 无法为“name”赋值，因为它是只读属性。<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>这样可以改变<code>readonly</code>对象的属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;reactive, readonly&#125; from &#x27;vue&#x27;<br>let obj = reactive(&#123; name: &#x27;小满&#x27; &#125;);<br>const read = readonly(obj)<br>// read.name=&#x27;sss&#x27;<br><br>const show = () =&gt; &#123;<br>  obj.name = &#x27;sss&#x27;;<br>  console.log(obj, read);<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h5 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a>shallowReactive</h5><p>浅层的<code>Reactive</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>  &lt;form&gt;<br>    &lt;div&gt;&#123;&#123; obj &#125;&#125;&lt;/div&gt;<br>    &lt;button @click.prevent=&quot;show&quot;&gt;展示&lt;/button&gt;<br>  &lt;/form&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;reactive, readonly, shallowReactive&#125; from &#x27;vue&#x27;<br>let obj = shallowReactive(&#123;<br>  name: &#123;<br>    value: &#123;<br>      key: 1<br>    &#125;<br>  &#125;<br>&#125;)<br>const show = () =&gt; &#123;<br>  obj.name.value.key = 1111;<br>  console.log(obj);<br>&#125;<br>&lt;/script&gt;<br>&lt;style scoped&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><code>shallowReactive</code>也会被<code>Reactive</code>修改</p>
<h4 id="to系列全家桶"><a href="#to系列全家桶" class="headerlink" title="to系列全家桶"></a>to系列全家桶</h4><h5 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>  &lt;form&gt;<br>    &lt;div&gt;&#123;&#123; obj &#125;&#125;&lt;/div&gt;<br>    &lt;button @click.prevent=&quot;change&quot;&gt;展示&lt;/button&gt;<br>  &lt;/form&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;reactive, readonly, shallowReactive&#125; from &#x27;vue&#x27;<br>let obj = &#123;name:111&#125;<br>const change = () =&gt; &#123;<br>  obj.name = 12334;<br>  console.log(obj);<br>&#125;<br>&lt;/script&gt;<br>&lt;style scoped&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>这样只能修改值，修改不了视图，<strong>不是响应式的</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;reactive, readonly, shallowReactive, toRef&#125; from &#x27;vue&#x27;<br>let obj = &#123; name: 111, like:&#x27;JK&#x27; &#125;<br>let like = toRef(obj, &#x27;like&#x27;); // toRef应该这样使用<br>const change = () =&gt; &#123;<br>  like.value = &#x27;百褶裙&#x27;; // 要加value才能访问属性<br>  console.log(obj);<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>这样也不行，因为<code>toRef</code>只能用给响应式对象：</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230903113559397.png" srcset="/img/loading.gif" lazyload alt="image-20230903113559397"></p>
<p>这样是正确的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;reactive, readonly, shallowReactive, toRef&#125; from &#x27;vue&#x27;<br>let obj = reactive(&#123; name: 111, like: &#x27;JK&#x27; &#125;);<br>let like = toRef(obj, &#x27;like&#x27;);<br>const change = () =&gt; &#123;<br>  like.value = &#x27;百褶裙&#x27;;<br>  console.log(obj);<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230903113814077.png" srcset="/img/loading.gif" lazyload alt="image-20230903113814077"></p>
<h5 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h5><p>对每个属性都调用一遍<code>toRef</code></p>
<p>手动实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">const toRefs = &lt;T extends object&gt;(object: T) =&gt; &#123;<br>  const map: any = &#123;&#125;;<br>  for (let key in object) &#123;<br>    map[key]=toRef(object, key)<br>  &#125;<br>  return map;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a>toRaw</h5><p>脱去代理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj, <span class="hljs-title function_">toRaw</span>(obj));<br></code></pre></td></tr></table></figure>

<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230903115658432.png" srcset="/img/loading.gif" lazyload alt="image-20230903115658432"></p>
<h4 id="计算属性-1"><a href="#计算属性-1" class="headerlink" title="计算属性"></a>计算属性</h4><p>计算属性就是当依赖的属性的值发生变化的时候，才会触发他的更改，如果依赖的值，不发生变化的时候，使用的是缓存中的属性值。</p>
<ol>
<li><p>函数形式（常用，只设置setter）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; computed, reactive, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> price = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<span class="hljs-comment">//$0</span><br><br><span class="hljs-keyword">let</span> m = computed&lt;string&gt;(<span class="hljs-function">()=&gt;</span>&#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">`$`</span> + price.<span class="hljs-property">value</span><br>&#125;)<br><br>price.<span class="hljs-property">value</span> = <span class="hljs-number">500</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>对象形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>   &lt;div&gt;&#123;&#123; mul &#125;&#125;&lt;/div&gt;<br>   &lt;div @click=&quot;mul = 100&quot;&gt;click&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>import &#123; computed, ref &#125; from &#x27;vue&#x27;<br>let price = ref&lt;number | string&gt;(1)//$0<br>let mul = computed(&#123;<br>   get: () =&gt; &#123;<br>      return price.value<br>   &#125;,<br>   set: (value) =&gt; &#123;<br>      price.value = &#x27;set&#x27; + value<br>   &#125;<br>&#125;)<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="侦听属性"><a href="#侦听属性" class="headerlink" title="侦听属性"></a>侦听属性</h4><h5 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h5><p><code>watch</code> 需要侦听特定的数据源，并在单独的回调函数中执行副作用</p>
<ol>
<li><p>watch第一个参数监听源</p>
</li>
<li><p>watch第二个参数回调函数cb（newVal,oldVal）</p>
</li>
<li><p>watch第三个参数一个options配置项是一个对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">immediate</span>:<span class="hljs-literal">true</span> <span class="hljs-comment">//是否立即调用一次</span><br>    <span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span> <span class="hljs-comment">//是否开启深度监听</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<p>实例：</p>
<h6 id="监听一个"><a href="#监听一个" class="headerlink" title="监听一个"></a>监听一个</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">let</span> message = <span class="hljs-title function_">ref</span>(&#123;<br>    <span class="hljs-attr">nav</span>:&#123;<br>        <span class="hljs-attr">bar</span>:&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;&quot;</span><br>        &#125;<br>    &#125;<br>&#125;)<br><br><span class="hljs-title function_">watch</span>(message, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;新的值----&#x27;</span>, newVal);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;旧的值----&#x27;</span>, oldVal);<br>&#125;,&#123;<br>    <span class="hljs-attr">immediate</span>:<span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<h6 id="监听多个："><a href="#监听多个：" class="headerlink" title="监听多个："></a>监听多个：</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, watch ,reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">let</span> message = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-keyword">let</span> message2 = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><br><span class="hljs-title function_">watch</span>([message,message2], <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;新的值----&#x27;</span>, newVal);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;旧的值----&#x27;</span>, oldVal);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h6 id="监听Reactive"><a href="#监听Reactive" class="headerlink" title="监听Reactive"></a>监听Reactive</h6><p>使用reactive监听深层对象开启和不开启deep 效果一样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, watch ,reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">let</span> message = <span class="hljs-title function_">reactive</span>(&#123;<br>    <span class="hljs-attr">nav</span>:&#123;<br>        <span class="hljs-attr">bar</span>:&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;&quot;</span><br>        &#125;<br>    &#125;<br>&#125;)<br><span class="hljs-title function_">watch</span>(message, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;新的值----&#x27;</span>, newVal);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;旧的值----&#x27;</span>, oldVal);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h6 id="只监听reactive的一个值"><a href="#只监听reactive的一个值" class="headerlink" title="只监听reactive的一个值"></a>只监听reactive的一个值</h6><p>需要是一个函数的返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, watch ,reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">let</span> message = <span class="hljs-title function_">reactive</span>(&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">name2</span>:<span class="hljs-string">&quot;&quot;</span><br>&#125;)<br><span class="hljs-title function_">watch</span>(<span class="hljs-function">()=&gt;</span>message.<span class="hljs-property">name</span>, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;新的值----&#x27;</span>, newVal);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;旧的值----&#x27;</span>, oldVal);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h5 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h5><p>详见：<a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/122802130">小满vue-watchEffect</a></p>
<p>（页面加载的时候会立即执行一次）</p>
<p>立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数。</p>
<p>如果用到message 就只会监听message 就是用到几个监听几个 而且是非惰性 会默认调用一次</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> message = ref&lt;string&gt;(<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-keyword">let</span> message2 = ref&lt;string&gt;(<span class="hljs-string">&#x27;&#x27;</span>)<br> <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">//console.log(&#x27;message&#x27;, message.value);</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;message2&#x27;</span>, message2.<span class="hljs-property">value</span>);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="组件-amp-生命周期"><a href="#组件-amp-生命周期" class="headerlink" title="组件&amp;生命周期"></a>组件&amp;生命周期</h4><p>引入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> A form <span class="hljs-string">&#x27;./components/aaa.vue&#x27;</span><br></code></pre></td></tr></table></figure>

<p><code>A</code>可以为任意名称</p>
<p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;A&gt;&lt;/A&gt;<br>    &lt;A&gt;&lt;/A&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<p>生命周期：</p>
<ol>
<li><p>在setup语法糖模式下，没有<code>before</code>、<code>created</code>这两个生命周期，可以用<code>setup</code>代替</p>
</li>
<li><p>onBeforeMount()<br>在组件DOM实际渲染安装之前调用。在这一步中，根元素还不存在。</p>
</li>
<li><p>onMounted()<br>在组件的第一次渲染后调用，该元素现在可用，允许直接DOM访问<br><code>v-if</code>会触发这两个，但<code>v-show</code>不会</p>
</li>
<li><p>onBeforeUpdate()<br>数据更新时调用，发生在虚拟 DOM 打补丁之前。</p>
</li>
<li><p>onUpdated()<br>DOM更新后，updated的方法即会调用。</p>
</li>
<li><p>onBeforeUnmount()<br>在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的。</p>
</li>
<li><p>onUnmounted()<br>卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。</p>
</li>
</ol>
<h5 id="实操组件和认识less-sass-和-scoped"><a href="#实操组件和认识less-sass-和-scoped" class="headerlink" title="实操组件和认识less sass 和 scoped"></a>实操组件和认识less sass 和 scoped</h5><p>bem架构：</p>
<p>他是一种css架构 <strong>oocss 实现的一种 （面向对象css） ，</strong><code>BEM</code>实际上是<code>block</code>、<code>element</code>、<code>modifier</code>的缩写，分别为块层、元素层、修饰符层，element UI 也使用的是这种架构</p>
<p>BEM 命名约定的模式是：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.block</span> &#123;&#125;<br><br><span class="hljs-selector-class">.block__element</span> &#123;&#125;<br><br><span class="hljs-selector-class">.block--modifier</span> &#123;&#125;<br></code></pre></td></tr></table></figure>

<p>使用sass 最小单元复刻一个bem 架构（写在<code>./src/bem.scss</code>中）：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-variable">$block-sel</span>: <span class="hljs-string">&quot;-&quot;</span> !default;<br><span class="hljs-variable">$element-sel</span>: <span class="hljs-string">&quot;__&quot;</span> !default;<br><span class="hljs-variable">$modifier-sel</span>: <span class="hljs-string">&quot;--&quot;</span> !default;<br><span class="hljs-variable">$namespace</span>:<span class="hljs-string">&#x27;xm&#x27;</span> !default;<br><span class="hljs-keyword">@mixin</span> bfc &#123;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br><span class="hljs-comment">//混入</span><br><span class="hljs-keyword">@mixin</span> b(<span class="hljs-variable">$block</span>) &#123;<br>   <span class="hljs-variable">$B</span>: <span class="hljs-variable">$namespace</span> + <span class="hljs-variable">$block-sel</span> + <span class="hljs-variable">$block</span>; <span class="hljs-comment">//变量</span><br>   .#&#123;<span class="hljs-variable">$B</span>&#125;&#123; <span class="hljs-comment">//插值语法#&#123;&#125;</span><br>     <span class="hljs-keyword">@content</span>; <span class="hljs-comment">//内容替换</span><br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> flex &#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> e(<span class="hljs-variable">$element</span>) &#123;<br>    <span class="hljs-variable">$selector</span>:&amp;;<br>    <span class="hljs-keyword">@at-root</span> &#123;<br>        #&#123;<span class="hljs-variable">$selector</span> + <span class="hljs-variable">$element-sel</span> + <span class="hljs-variable">$element</span>&#125; &#123;<br>            <span class="hljs-keyword">@content</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> m(<span class="hljs-variable">$modifier</span>) &#123;<br>    <span class="hljs-variable">$selector</span>:&amp;;<br>    <span class="hljs-keyword">@at-root</span> &#123;<br>        #&#123;<span class="hljs-variable">$selector</span> + <span class="hljs-variable">$modifier-sel</span> + <span class="hljs-variable">$modifier</span>&#125; &#123;<br>            <span class="hljs-keyword">@content</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>全局扩充scss，（在<code>./vite/config.ts</code>文件中）：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-vue&#x27;</span><br><br><span class="hljs-comment">// https://vitejs.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],<br>    <span class="hljs-attr">css</span>: &#123;<br>        <span class="hljs-attr">preprocessorOptions</span>: &#123;<br>            <span class="hljs-attr">scss</span>: &#123;<br>                <span class="hljs-attr">additionalData</span>: <span class="hljs-string">&quot;@import &#x27;./src/bem.scss&#x27;;&quot;</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="父子组件传参"><a href="#父子组件传参" class="headerlink" title="父子组件传参"></a>父子组件传参</h4><h5 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h5><p>父组件发送：</p>
<p>直接使用<code>v-bind:</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;waterFall :title=&quot;name&quot;&gt; &lt;/waterFall&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import waterFall from &quot;./components/water-fall.vue&quot;;<br>let name=&#x27;小满&#x27;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>子组件接收：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;子集&lt;/div&gt;<br>&lt;div&gt;值：&#123;&#123; title &#125;&#125;&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>import &#123; ref, reactive &#125; from &#x27;vue&#x27;;<br>const props = defineProps(&#123;<br>  title: &#123;<br>    type: String,<br>    default: &quot;默认值&quot;<br>  &#125;<br>&#125;)<br>console.log(props.title);<br>&lt;/script&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>可以在<code>template</code>中直接使用，但在<code>script</code>中使用时，要加上<code>props.</code></p>
<p>使用ts写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-title function_">withDefaults</span>(defineProps&lt;&#123;<br>  <span class="hljs-attr">title</span>: string,<br>  <span class="hljs-attr">arr</span>:number[]<br>&#125;&gt;(), &#123;<br>    <span class="hljs-attr">arr</span>: <span class="hljs-function">()=&gt;</span>[<span class="hljs-number">666</span>]<br>&#125;)<br></code></pre></td></tr></table></figure>

<h5 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h5><p>子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;子集&lt;/div&gt;<br>&lt;button @click=&quot;send&quot;&gt;给父组件传值&lt;/button&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>const emit=defineEmits([&#x27;on-click&#x27;])<br>const send = () =&gt; &#123;<br>    emit(&#x27;on-click&#x27;, &#x27;小满&#x27;)<br>&#125;<br>&lt;/script&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br><br>&lt;/style&gt;    <br></code></pre></td></tr></table></figure>

<p>使用ts：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> emit = defineEmits&lt;&#123;<br>    (<span class="hljs-attr">e</span>:<span class="hljs-string">&#x27;on-click&#x27;</span>, <span class="hljs-attr">name</span>:string):<span class="hljs-keyword">void</span><br>&#125;&gt;()<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">send</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;on-click&#x27;</span>, <span class="hljs-string">&#x27;小满&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>父：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;waterFall @on-click=&quot;getName&quot;&gt; &lt;/waterFall&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import waterFall from &quot;./components/water-fall.vue&quot;;<br>const getName = (name: string) =&gt; &#123;<br>  console.log(name, &#x27;========&gt;我是父组件&#x27;);<br>&#125;<br>&lt;/script&gt;<br><br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h5 id="子组件变量暴露给父组件"><a href="#子组件变量暴露给父组件" class="headerlink" title="子组件变量暴露给父组件"></a>子组件变量暴露给父组件</h5><p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;waterFallVue ref=&quot;waterFall&quot;&gt; &lt;/waterFallVue&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref &#125; from &quot;vue&quot;;<br>import waterFallVue from &quot;./components/water-fall.vue&quot;;<br>const waterFall = ref&lt;InstanceType&lt;typeof waterFallVue&gt;&gt;() // 获取dom<br>console.log(waterFall.value?.list);<br>&lt;/script&gt;<br><br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;子集&lt;/div&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>import &#123; reactive &#125; from &#x27;vue&#x27;;<br><br>const list = reactive&lt;number[]&gt;([4, 5, 6])<br>defineExpose(&#123;<br>    list<br>&#125;)<br>&lt;/script&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="全局组件，局部组件，递归组件"><a href="#全局组件，局部组件，递归组件" class="headerlink" title="全局组件，局部组件，递归组件"></a>全局组件，局部组件，递归组件</h4><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/122862736">小满</a></p>
<h5 id="注册全局组件："><a href="#注册全局组件：" class="headerlink" title="注册全局组件："></a>注册全局组件：</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ./src/main.ts</span><br><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./style.css&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">import</span> waterFull <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/water-fall.vue&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);<br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;water-full&#x27;</span>,waterFull);<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p>注册完毕后，可以在其他地方使用，无需引入</p>
<h5 id="递归组件"><a href="#递归组件" class="headerlink" title="递归组件"></a>递归组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div class=&quot;tree&quot; v-for=&quot;item in data&quot;&gt;<br>        &lt;input type=&quot;checkbox&quot;&gt; &lt;span&gt;&#123;&#123; item.name &#125;&#125;&lt;/span&gt;<br>        &lt;Tree v-if=&quot;item?.children?.length&quot; :data=&quot;item.children&quot;&gt;&lt;/Tree&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<p><code>Tree</code>可以是当前文件名</p>
<h4 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div style=&quot;display: flex;&quot;&gt;<br>        &lt;div @click=&quot;switchCom(item, index)&quot; :class=&quot;&#123;&#x27;active&#x27;: active==index&#125;&quot; class=&quot;tabs&quot; v-for=&quot;(item, index) in data&quot;&gt;<br>            &lt;div&gt;&#123;&#123; item.name &#125;&#125;&lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, reactive &#125; from &#x27;vue&#x27;;<br>import AVue from &#x27;./components/HelloWorld.vue&#x27;;<br>import BVue from &#x27;./components/HelloWorld.vue&#x27;;<br>import CVue from &#x27;./components/HelloWorld.vue&#x27;;<br><br>const comId = ref(AVue);<br>const active = ref(0);<br>const data = reactive([<br>    &#123;<br>        name: &#x27;A组件&#x27;,<br>        com:AVue<br>    &#125;,<br>    &#123;<br>        name: &#x27;B组件&#x27;,<br>        com:BVue<br>    &#125;,<br>    &#123;<br>        name: &#x27;C组件&#x27;,<br>        com:CVue<br>    &#125;,<br>]);<br>const switchCom = (item, index) =&gt; &#123;<br>    comId.value = item.com;<br>    active.value = index;<br>&#125;<br>&lt;/script&gt;<br><br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>性能优化</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> tab = reactive&lt;<span class="hljs-title class_">Com</span>[]&gt;([&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;A组件&quot;</span>,<br>    <span class="hljs-attr">comName</span>: <span class="hljs-title function_">markRaw</span>(A)<br>&#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;B组件&quot;</span>,<br>    <span class="hljs-attr">comName</span>: <span class="hljs-title function_">markRaw</span>(B)<br>&#125;])<br></code></pre></td></tr></table></figure>

<h4 id="插槽slot"><a href="#插槽slot" class="headerlink" title="插槽slot"></a>插槽slot</h4><h5 id="匿名插槽"><a href="#匿名插槽" class="headerlink" title="匿名插槽"></a>匿名插槽</h5><p>在子组件放置一个插槽</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>       &lt;slot&gt;&lt;/slot&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<p>父组件使用插槽</p>
<p>在父组件给这个插槽填充内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Dialog&gt;<br>    &lt;template v-slot&gt;<br>        &lt;div&gt;2132&lt;/div&gt;<br>    &lt;/template&gt;<br>&lt;/Dialog&gt;<br></code></pre></td></tr></table></figure>

<h5 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h5><p>具名插槽其实就是给插槽取个名字。一个子组件可以放多个插槽，而且可以放在不同的地方，而父组件填充内容时，可以根据这个名字把内容填充到对应插槽中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div&gt;<br>    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;<br>    &lt;slot&gt;&lt;/slot&gt;<br><br>    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>

<p>父组件使用需对应名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Dialog&gt;<br>    &lt;template v-slot:header&gt;<br>        &lt;div&gt;1&lt;/div&gt;<br>    &lt;/template&gt;<br><br>    &lt;template v-slot&gt;<br>        &lt;div&gt;2&lt;/div&gt;<br>    &lt;/template&gt;<br><br>    &lt;template v-slot:footer&gt;<br>        &lt;div&gt;3&lt;/div&gt;<br>    &lt;/template&gt;<br>&lt;/Dialog&gt;<br></code></pre></td></tr></table></figure>

<h5 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h5><p>在子组件动态绑定参数 派发给父组件的slot去使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div&gt;<br>    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;<br>    &lt;div&gt;<br>        &lt;div v-for=&quot;item in 100&quot;&gt;<br>            &lt;slot :data=&quot;item&quot;&gt;&lt;/slot&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br><br>    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>

<p>通过解构方式取值</p>
<p>(v-slot有对应的简写: #)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Dialog&gt;<br>    &lt;template #header&gt;<br>        &lt;div&gt;1&lt;/div&gt;<br>    &lt;/template&gt;<br>    &lt;template #default=&quot;&#123; data &#125;&quot;&gt;<br>        &lt;div&gt;&#123;&#123; data &#125;&#125;&lt;/div&gt;<br>    &lt;/template&gt;<br>    &lt;template #footer&gt;<br>        &lt;div&gt;3&lt;/div&gt;<br>    &lt;/template&gt;<br>&lt;/Dialog&gt;<br></code></pre></td></tr></table></figure>

<p><em>简写：</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Dialog&gt;<br>    &lt;template #header&gt;<br>        &lt;div&gt;1&lt;/div&gt;<br>    &lt;/template&gt;<br>    &lt;template #default&gt;<br>        &lt;div&gt;2&lt;/div&gt;<br>    &lt;/template&gt;<br>    &lt;template #footer&gt;<br>        &lt;div&gt;3&lt;/div&gt;<br>    &lt;/template&gt;<br>&lt;/Dialog&gt;<br></code></pre></td></tr></table></figure>

<h5 id="动态插槽"><a href="#动态插槽" class="headerlink" title="动态插槽"></a>动态插槽</h5><p>插槽可以是一个变量名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;Dialog&gt;<br>        &lt;template #[name]&gt;<br>            &lt;div&gt;23&lt;/div&gt;<br>        &lt;/template&gt;<br>    &lt;/Dialog&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>const name = ref(&#x27;header&#x27;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="内置组件"><a href="#内置组件" class="headerlink" title="内置组件"></a>内置组件</h4><h5 id="Teleport传送组件"><a href="#Teleport传送组件" class="headerlink" title="Teleport传送组件"></a>Teleport传送组件</h5><p>[小满(<a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/122916261">https://xiaoman.blog.csdn.net/article/details/122916261</a>)</p>
<p>Teleport 是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 React 的 Portal。</p>
<p>主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父级style样式影响使用方法</p>
<p>通过to 属性 插入指定元素位置 to&#x3D;”body” 便可以将<code>Teleport</code> 内容传送到指定位置</p>
<p>也可以自定义传送位置 支持 class id等 选择器</p>
<h5 id="keep-alive缓存组件"><a href="#keep-alive缓存组件" class="headerlink" title="keep-alive缓存组件"></a>keep-alive缓存组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;keep-alive :include=&quot;[&#x27;A&#x27;, &#x27;B&#x27;]&quot; :exclude=&quot;[&#x27;C&#x27;, &#x27;D&#x27;]&quot; :max=&quot;&quot;&gt;&lt;/keep-alive&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><code>include</code>：要缓存的组件</li>
<li><code>exclude</code>：不缓存的组件</li>
<li><code>max</code>：缓存组件的最大数量，<code>LRU</code>算法</li>
</ul>
<p>生命周期</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;初始化&#x27;</span>); <span class="hljs-comment">//只做一次</span><br>&#125;)<br><span class="hljs-title function_">onActivated</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;keep-alive初始化&#x27;</span>); <span class="hljs-comment">//每次切换时和第一次注册时都做</span><br>&#125;)<br><span class="hljs-title function_">onDeactivated</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;keep-alive卸载&#x27;</span>); <span class="hljs-comment">//每次切换时都做</span><br>&#125;)<br><span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;卸载&#x27;</span>); <span class="hljs-comment">//不做</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<h5 id="transition-过渡组件"><a href="#transition-过渡组件" class="headerlink" title="transition 过渡组件"></a>transition 过渡组件</h5><p>Vue 提供了 transition 的封装组件，在下列情形中，可以给任何元素和组件添加进入&#x2F;离开过渡:</p>
<ul>
<li>条件渲染 (使用 v-if)</li>
<li>条件展示 (使用 v-show)</li>
<li>动态组件</li>
<li>组件根节点</li>
</ul>
<p>自定义 transition 过度效果，你需要对transition组件的name属性自定义。并在css中写入对应的样式</p>
<p>在进入&#x2F;离开的过渡中，会有 6 个 class 切换，下面的<code>v</code>代表<code>template</code>中<code>name</code>的值</p>
<ol>
<li>v-enter-from：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</li>
<li>v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡&#x2F;动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li>
<li>v-enter-to：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡&#x2F;动画完成之后移除。</li>
<li>v-leave-from：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</li>
<li>v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡&#x2F;动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li>
<li>v-leave-to：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被移除)，在过渡&#x2F;动画完成之后移除。</li>
</ol>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs css">//开始过度<br><span class="hljs-selector-class">.fade-enter-from</span>&#123;<br>   <span class="hljs-attribute">background</span>:red;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">0px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">0px</span>;<br>   <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>)<br>&#125;<br>//开始过度了<br><span class="hljs-selector-class">.fade-enter-active</span>&#123;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">2.5s</span> linear;<br>&#125;<br>//过度完成<br><span class="hljs-selector-class">.fade-enter-to</span>&#123;<br>   <span class="hljs-attribute">background</span>:yellow;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">200px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<br>&#125;<br>//离开的过度<br><span class="hljs-selector-class">.fade-leave-from</span>&#123;<br>  <span class="hljs-attribute">width</span>:<span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>)<br>&#125;<br>//离开中过度<br><span class="hljs-selector-class">.fade-leave-active</span>&#123;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">1s</span> linear;<br>&#125;<br>//离开完成<br><span class="hljs-selector-class">.fade-leave-to</span>&#123;<br>  <span class="hljs-attribute">width</span>:<span class="hljs-number">0px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">0px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="依赖注入Provide-x2F-Inject"><a href="#依赖注入Provide-x2F-Inject" class="headerlink" title="依赖注入Provide &#x2F; Inject"></a>依赖注入Provide &#x2F; Inject</h4><p>注册一个变量，可以全局使用</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230911151041239.png" srcset="/img/loading.gif" lazyload alt="image-20230911151041239"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;h1&gt;app.vue&lt;/h1&gt;<br>&lt;label&gt;<br>    &lt;input v-model=&quot;colorVal&quot; value=&#x27;red&#x27; name=&quot;color&quot; type=&quot;radio&quot;&gt; 红色<br>&lt;/label&gt;<br>&lt;label&gt;<br>    &lt;input v-model=&quot;colorVal&quot; value=&#x27;pink&#x27; name=&quot;color&quot; type=&quot;radio&quot;&gt; 粉色<br>&lt;/label&gt;<br>&lt;label&gt;<br>    &lt;input v-model=&quot;colorVal&quot; value=&#x27;green&#x27; name=&quot;color&quot; type=&quot;radio&quot;&gt; 绿色<br>&lt;/label&gt;<br>&lt;div class=&quot;box&quot;&gt;&lt;/div&gt;<br>&lt;hr&gt;<br>&lt;vueA&gt;&lt;/vueA&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; provide, ref &#125; from &#x27;vue&#x27;;<br>import vueA from &#x27;./components/providea.vue&#x27;<br><br>const colorVal=ref&lt;string&gt;(&#x27;red&#x27;)<br>provide(&#x27;color&#x27;, colorVal)<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.box&#123;<br>    width: 100px;<br>    height: 100px;<br>    background-color: v-bind(colorVal);<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;&lt;/div&gt;<br>&lt;hr&gt;<br>&lt;vueB&gt;&lt;/vueB&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import type&#123;Ref&#125; from &#x27;vue&#x27;<br>import &#123; inject&#125; from &#x27;vue&#x27;<br>import vueB from &#x27;./provideb.vue&#x27;<br>const color = inject&lt;Ref&lt;string&gt;&gt;(&#x27;color&#x27;)<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>div&#123;<br>    width: 100px;<br>    height: 100px;<br>    background-color: v-bind(color);<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;&lt;/div&gt;<br>&lt;button @click=&quot;change(111)&quot;&gt;绿！&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; inject &#125; from &quot;vue&quot;;<br>import type &#123; Ref &#125; from &#x27;vue&#x27;;<br>const color=inject&lt;Ref&lt;string&gt;&gt;(&#x27;color&#x27;)<br>const change = (num: number)=&gt;&#123;<br>    console.log(num);<br>    color!.value=&#x27;green&#x27;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>div&#123;<br>    width: 100px;<br>    height: 100px;<br>    background-color: v-bind(color);<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="兄弟组件传参和bus"><a href="#兄弟组件传参和bus" class="headerlink" title="兄弟组件传参和bus"></a>兄弟组件传参和bus</h4><h5 id="借助父组件"><a href="#借助父组件" class="headerlink" title="借助父组件"></a>借助父组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;A @on-click=&quot;getFalg&quot;&gt;&lt;/A&gt;<br>        &lt;B :flag=&quot;Flag&quot;&gt;&lt;/B&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import A from &#x27;./components/A.vue&#x27;<br>import B from &#x27;./components/B.vue&#x27;<br>import &#123; ref &#125; from &#x27;vue&#x27;<br>let Flag = ref&lt;boolean&gt;(false)<br>const getFalg = (flag: boolean) =&gt; &#123;<br>   Flag.value = flag;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>A 组件派发事件通过App.vue 接受A组件派发的事件然后在Props 传给B组件 也是可以实现的</p>
<p>缺点就是比较麻烦 ，无法直接通信，只能充当桥梁</p>
<h5 id="Event-Bus"><a href="#Event-Bus" class="headerlink" title="Event Bus"></a>Event Bus</h5><p>我们在Vue2可以使用 $emit 传递 $on监听 emit传递过来的事件</p>
<p>这个原理其实是运用了JS设计模式之发布订阅模式</p>
<p>我写了一个简易版</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"> <span class="hljs-keyword">type</span> <span class="hljs-title class_">BusClass</span>&lt;T&gt; = &#123;<br>    <span class="hljs-attr">emit</span>: <span class="hljs-function">(<span class="hljs-params">name: T</span>) =&gt;</span> <span class="hljs-built_in">void</span><br>    <span class="hljs-attr">on</span>: <span class="hljs-function">(<span class="hljs-params">name: T, callback: <span class="hljs-built_in">Function</span></span>) =&gt;</span> <span class="hljs-built_in">void</span><br>&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">BusParams</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">symbol</span> <br><span class="hljs-keyword">type</span> <span class="hljs-title class_">List</span> = &#123;<br>    [<span class="hljs-attr">key</span>: <span class="hljs-title class_">BusParams</span>]: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Function</span>&gt;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bus</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BusParams</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BusClass</span>&lt;T&gt; &#123;<br>    <span class="hljs-attr">list</span>: <span class="hljs-title class_">List</span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = &#123;&#125;<br>    &#125;<br>    <span class="hljs-title function_">emit</span>(<span class="hljs-params">name: T, ...args: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">any</span>&gt;</span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-attr">eventName</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Function</span>&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>[name]<br>        eventName.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> &#123;<br>            ev.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>        &#125;)<br>    &#125;<br>    <span class="hljs-title function_">on</span>(<span class="hljs-params">name: T, callback: <span class="hljs-built_in">Function</span></span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-attr">fn</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Function</span>&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>[name] || [];<br>        fn.<span class="hljs-title function_">push</span>(callback)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>[name] = fn<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bus</span>&lt;<span class="hljs-built_in">number</span>&gt;()<br></code></pre></td></tr></table></figure>

<h5 id="mitt库"><a href="#mitt库" class="headerlink" title="mitt库"></a>mitt库</h5><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/125453908">https://xiaoman.blog.csdn.net/article/details/125453908</a></p>
<ol>
<li>安装</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm install mitt -S<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>main.ts 初始化<br>全局总线，vue 入口文件 main.js 中挂载全局属性</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;mitt&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Mit</span> = <span class="hljs-title function_">mitt</span>()<br><br><span class="hljs-comment">//TypeScript注册</span><br><span class="hljs-comment">// 由于必须要拓展ComponentCustomProperties类型才能获得类型提示</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&quot;vue&quot;</span> &#123;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComponentCustomProperties</span> &#123;<br>        <span class="hljs-attr">$Bus</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Mit</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br><span class="hljs-comment">//Vue3挂载全局API</span><br>app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$Bus</span> = <span class="hljs-title class_">Mit</span><br><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>



<h4 id="TSX"><a href="#TSX" class="headerlink" title="TSX"></a>TSX</h4><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/123172735">https://xiaoman.blog.csdn.net/article/details/123172735</a></p>
<p>JSX本身是一种JavaScript的语法扩展，用于在JavaScript代码中编写类似于HTML的结构。它通常与React一起使用，用于构建用户界面。</p>
<p>TSX是指”TypeScript JSX”，是一种使用TypeScript编写的JavaScript的扩展语法。</p>
<p><code>vite.config.ts</code>配置：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-vue&#x27;</span><br><span class="hljs-keyword">import</span> vueJsx <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span><br><span class="hljs-comment">// https://vitejs.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>(), <span class="hljs-title function_">vueJsx</span>()],<br>    <span class="hljs-attr">css</span>: &#123;<br>        <span class="hljs-attr">preprocessorOptions</span>: &#123;<br>            <span class="hljs-attr">scss</span>: &#123;<br>                <span class="hljs-attr">additionalData</span>: <span class="hljs-string">&quot;@import &#x27;./src/bem.scss&#x27;;&quot;</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<p><code>App.vue:</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>    &lt;xiaoman&gt;&lt;/xiaoman&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import xiaoman from &#x27;./App.tsx&#x27;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><code>App.tsx</code>第一种写法：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// App.tsx</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>小满<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>另一种：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// 返回一个渲染函数</span><br><span class="hljs-keyword">import</span> &#123; defineComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">age</span>: <span class="hljs-number">23</span><br>        &#125; <br>    &#125;,<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123; <br>        <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123; this.age &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>第三种：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// 返回一个渲染函数</span><br><span class="hljs-comment">// optionsAPI</span><br><br><span class="hljs-keyword">import</span> &#123; defineComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>(&#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>





<p>TIPS tsx不会自动解包，使用ref也要加.vlaue ! ! !</p>
<ul>
<li><p>tsx支持 <code>v-model</code> 和 <code>v-show</code>的使用</p>
</li>
<li><p><code>v-if</code>不支持</p>
</li>
<li><p><code>v-for</code>不支持（可以用.map() 模拟）</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br> <br><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br> <br><span class="hljs-keyword">const</span> <span class="hljs-title function_">renderDom</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            &#123;</span><br><span class="language-xml">              arr.map(v=&gt;&#123;</span><br><span class="language-xml">                  return <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>$&#123;v&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              &#125;)</span><br><span class="language-xml">            &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br> <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> renderDom<br></code></pre></td></tr></table></figure>
</li>
<li><p><code>v-bind</code>使用：</p>
<p>直接赋值即可</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br> <br><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br> <br><span class="hljs-keyword">const</span> <span class="hljs-title function_">renderDom</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-arr</span>=<span class="hljs-string">&#123;arr&#125;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br> <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> renderDom<br></code></pre></td></tr></table></figure>
</li>
<li><p>v-on绑定事件 所有的事件都按照react风格来</p>
<ol>
<li>所有事件有on开头</li>
<li>所有事件名称首字母大写</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cobol"> <br>const renderDom = () =&gt; &#123;<br>    return (<br>        &lt;&gt;<br>            &lt;button onClick=&#123;clickTap&#125;&gt;点击&lt;/button&gt;<br>        &lt;/&gt;<br>    )<br>&#125;<br> <br>const clickTap = () =&gt; &#123;<br>    console.log(&#x27;click&#x27;);<br>&#125;<br> <br>export default renderDom<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="directive自定义指令"><a href="#directive自定义指令" class="headerlink" title="directive自定义指令"></a>directive自定义指令</h4><h5 id="样例简介"><a href="#样例简介" class="headerlink" title="样例简介"></a>样例简介</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>    &lt;button&gt;切换&lt;/button&gt;<br>    &lt;A v-move:aaa.xiaoman=&quot;&#123;background: &#x27;red&#x27;&#125;&quot;&gt;&lt;/A&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import A from &#x27;./components/A.vue&#x27;<br>import &#123; ref, Directive, DirectiveBinding &#125; from &#x27;vue&#x27;<br>let flag = ref&lt;boolean&gt;(true)<br>const vMove: Directive = &#123;<br>    created() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>    beforeMount() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>    mounted() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>    beforeUpdate() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>    updated() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>    beforeUnmount() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>    unmounted() &#123;<br>        console.log(&#x27;========&gt; created&#x27;);<br>        console.log(arguments);<br>    &#125;,<br>&#125; <br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<p><code>A.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div class=&quot;AAA&quot;&gt;&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>div&#123;<br>    width: 100px;<br>    height: 100px;<br>    background-color: #888;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<p>输出：</p>
<p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230912201155664.png" srcset="/img/loading.gif" lazyload alt="image-20230912201155664"></p>
<ol start="0">
<li><p><code>div.AAA</code>是子组件的选择器<code>el</code>，类型：<code>HTMLElement</code></p>
</li>
<li><p><img src="/2023/10/09/vue%E7%AC%94%E8%AE%B0/image-20230912201356552.png" srcset="/img/loading.gif" lazyload alt="image-20230912201356552"></p>
<p>类型：<code>DirectiveBinding</code>，传过来的参数:</p>
<ul>
<li>instance：使用指令的组件实例。</li>
<li>value：传递给指令的值。例如，在 v-my-directive&#x3D;”1 + 1” 中，该值为 2。</li>
<li>oldValue：先前的值，仅在 beforeUpdate 和 updated 中可用。无论值是否有更改都可用。</li>
<li>arg：传递给指令的参数(如果有的话)。例如在 v-my-directive:foo 中，arg 为 “foo”。</li>
<li>modifiers：包含修饰符(如果有的话) 的对象。例如在 v-my-directive.foo.bar 中，修饰符对象为 {foo: true，bar: true}。</li>
<li>dir：一个对象，在注册指令时作为参数传递。例如，在以下指令中</li>
</ul>
</li>
<li><p>当前组件的<code>v-node</code>，虚拟dom</p>
</li>
<li><p><code>prevode</code>，上一个虚拟dom</p>
</li>
</ol>
<h5 id="函数简写"><a href="#函数简写" class="headerlink" title="函数简写"></a>函数简写</h5><p>可能想在 <code>mounted</code> 和 <code>updated</code> 时触发相同行为，而不关心其他的钩子函数。那么你可以通过将这个函数模式实现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>   &lt;div class=&quot;btns&quot;&gt;<br>       &lt;button v-has-show=&quot;&#x27;shop:create&#x27;&quot;&gt;创建&lt;/button&gt;<br> <br>       &lt;button v-has-show=&quot;&#x27;shop:edit&#x27;&quot;&gt;编辑&lt;/button&gt;<br> <br>       &lt;button v-has-show=&quot;&#x27;shop:delete&#x27;&quot;&gt;删除&lt;/button&gt;<br>   &lt;/div&gt;<br>&lt;/template&gt;<br> <br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, reactive,  &#125; from &#x27;vue&#x27;<br>import type &#123;Directive&#125; from &#x27;vue&#x27;<br>//permission<br>localStorage.setItem(&#x27;userId&#x27;,&#x27;xiaoman-zs&#x27;)<br> <br>//mock后台返回的数据<br>const permission = [<br>    &#x27;xiaoman-zs:shop:edit&#x27;,<br>    &#x27;xiaoman-zs:shop:create&#x27;,<br>    &#x27;xiaoman-zs:shop:delete&#x27;<br>]<br>const userId = localStorage.getItem(&#x27;userId&#x27;) as string<br>const vHasShow:Directive&lt;HTMLElement,string&gt; = (el,bingding) =&gt; &#123;<br>   if(!permission.includes(userId+&#x27;:&#x27;+ bingding.value))&#123;<br>       el.style.display = &#x27;none&#x27;<br>   &#125;<br>&#125;<br> <br>&lt;/script&gt;<br> <br>&lt;style scoped lang=&#x27;less&#x27;&gt;<br>.btns&#123;<br>    button&#123;<br>        margin: 10px;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h5 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;div v-for=&quot;item in arr&quot;&gt;<br>            &lt;img height=&quot;500&quot; :data-index=&quot;item&quot; v-lazy=&quot;item&quot; width=&quot;360&quot; alt=&quot;&quot;&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br> <br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, reactive &#125; from &#x27;vue&#x27;<br>import type &#123; Directive &#125; from &#x27;vue&#x27;<br>const images: Record&lt;string, &#123; default: string &#125;&gt; = import.meta.globEager(&#x27;./assets/images/*.*&#x27;)<br>let arr = Object.values(images).map(v =&gt; v.default)<br> <br>let vLazy: Directive&lt;HTMLImageElement, string&gt; = async (el, binding) =&gt; &#123;<br>    let url = await import(&#x27;./assets/vue.svg&#x27;)<br>    el.src = url.default;<br>    let observer = new IntersectionObserver((entries) =&gt; &#123;<br>        console.log(entries[0], el)<br>        if (entries[0].intersectionRatio &gt; 0 &amp;&amp; entries[0].isIntersecting) &#123;<br>            setTimeout(() =&gt; &#123;<br>                el.src = binding.value;<br>                observer.unobserve(el)<br>            &#125;, 2000)<br>        &#125;<br>    &#125;)<br>    observer.observe(el)<br>&#125;<br> <br>&lt;/script&gt;<br> <br>&lt;style scoped lang=&#x27;less&#x27;&gt;&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="自定义attrs-x2F-hooks"><a href="#自定义attrs-x2F-hooks" class="headerlink" title="自定义attrs &#x2F; hooks"></a>自定义attrs &#x2F; hooks</h4><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/123271189">https://xiaoman.blog.csdn.net/article/details/123271189</a></p>
<p>主要用来处理复用代码逻辑的一些封装</p>
<p>这个在vue2 就已经有一个东西是<strong>Mixins</strong></p>
<p>mixins就是将这些多个相同的逻辑抽离出来，各个组件只需要引入mixins，就能实现一次写代码，多组件受益的效果。</p>
<p>弊端就是 会涉及到覆盖的问题</p>
<p>组件的data、methods、filters会覆盖mixins里的同名data、methods、filters。</p>
<h5 id="自定义attrs"><a href="#自定义attrs" class="headerlink" title="自定义attrs"></a>自定义attrs</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;A a=&quot;111&quot; b.ccc=&quot;cscacsa&quot;&gt;&lt;/A&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import A from &#x27;./components/A.vue&#x27;<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123;useAttrs&#125; from &#x27;vue&#x27;;<br>let attr = useAttrs()<br>console.log(attr.a);<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h5 id="自定义hooks"><a href="#自定义hooks" class="headerlink" title="自定义hooks"></a>自定义hooks</h5><p>图片转base64</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br> <br> <br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Options</span> = &#123;<br>    <span class="hljs-attr">el</span>: <span class="hljs-built_in">string</span><br>&#125;<br> <br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Return</span> = &#123;<br>    <span class="hljs-title class_">Baseurl</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span><br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">option: Options</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Return</span>&gt; &#123;<br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> <span class="hljs-attr">file</span>: <span class="hljs-title class_">HTMLImageElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(option.<span class="hljs-property">el</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLImageElement</span>;<br>            file.<span class="hljs-property">onload</span> = ():<span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> &#123;<br>                <span class="hljs-title function_">resolve</span>(&#123;<br>                    <span class="hljs-title class_">Baseurl</span>: <span class="hljs-title function_">toBase64</span>(file)<br>                &#125;)<br>            &#125;<br>        &#125;)<br>        <span class="hljs-keyword">const</span> toBase64 = (<span class="hljs-attr">el</span>: <span class="hljs-title class_">HTMLImageElement</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> <span class="hljs-attr">canvas</span>: <span class="hljs-title class_">HTMLCanvasElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;canvas&#x27;</span>)<br>            <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;2d&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">CanvasRenderingContext2D</span><br>            canvas.<span class="hljs-property">width</span> = el.<span class="hljs-property">width</span><br>            canvas.<span class="hljs-property">height</span> = el.<span class="hljs-property">height</span><br>            ctx.<span class="hljs-title function_">drawImage</span>(el, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>,canvas.<span class="hljs-property">height</span>)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(el.<span class="hljs-property">width</span>);<br>            <span class="hljs-keyword">return</span> canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">&#x27;image/png&#x27;</span>)<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="全局函数和变量"><a href="#全局函数和变量" class="headerlink" title="全局函数和变量"></a>全局函数和变量</h4><p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;&#123;&#123; $env &#125;&#125;&lt;/div&gt;<br>&lt;div&gt;&#123;&#123; $filters.format(&#x27;的飞机&#x27;) &#125;&#125;&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&#x27;ts&#x27;&gt;<br>import &#123; ref, reactive, getCurrentInstance &#125; from &#x27;vue&#x27;;<br>const app = getCurrentInstance()<br>console.log(app?.proxy.$env);<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><code>main.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br>app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$env</span> = <span class="hljs-string">&#x27;dev&#x27;</span>;<br><br>app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$filters</span> = &#123;<br>    format&lt;T&gt;(<span class="hljs-attr">str</span>: T) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`小满-<span class="hljs-subst">$&#123;str&#125;</span>`</span><br>    &#125;<br>&#125;<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h5 id="消除报错版"><a href="#消除报错版" class="headerlink" title="消除报错版"></a>消除报错版</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br>app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$env</span> = <span class="hljs-string">&#x27;dev&#x27;</span>;<br><br>app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$filters</span> = &#123;<br>    format&lt;T&gt;(<span class="hljs-attr">str</span>: T) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`小满-<span class="hljs-subst">$&#123;str&#125;</span>`</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Filter</span> = &#123;<br>    format&lt;T&gt;(<span class="hljs-attr">str</span>: T): <span class="hljs-built_in">string</span><br>&#125;<br> <br><span class="hljs-comment">// 声明要扩充@vue/runtime-core包的声明.</span><br><span class="hljs-comment">// 这里扩充&quot;ComponentCustomProperties&quot;接口, 因为他是vue3中实例的属性的类型.</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;vue&#x27;</span> &#123;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComponentCustomProperties</span> &#123;<br>        <span class="hljs-attr">$filters</span>: <span class="hljs-title class_">Filter</span>,<br>        <span class="hljs-attr">$env</span>: <span class="hljs-built_in">string</span><br>    &#125;<br>&#125;<br><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>





<h4 id="新的组件"><a href="#新的组件" class="headerlink" title="新的组件"></a>新的组件</h4><h5 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h5><ul>
<li>在Vue2中: 组件必须有一个根标签</li>
<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<h5 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h5><ul>
<li><p>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style="color:#DD5145">组件html结构</strong>移动到指定位置的技术。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;teleport to=&quot;移动位置&quot;&gt;<br>	&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;<br>		&lt;div class=&quot;dialog&quot;&gt;<br>			&lt;h3&gt;我是一个弹窗&lt;/h3&gt;<br>			&lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;<br>		&lt;/div&gt;<br>	&lt;/div&gt;<br>&lt;/teleport&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h5 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h5><ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
<ul>
<li><p>异步引入组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;defineAsyncComponent&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./components/Child.vue&#x27;</span>))<br></code></pre></td></tr></table></figure>
</li>
<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>	&lt;div class=&quot;app&quot;&gt;<br>		&lt;h3&gt;我是App组件&lt;/h3&gt;<br>		&lt;Suspense&gt;<br>			&lt;template v-slot:default&gt;<br>				&lt;Child/&gt;<br>			&lt;/template&gt;<br>			&lt;template v-slot:fallback&gt;<br>				&lt;h3&gt;加载中.....&lt;/h3&gt;<br>			&lt;/template&gt;<br>		&lt;/Suspense&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="其他vue3新特性"><a href="#其他vue3新特性" class="headerlink" title="其他vue3新特性"></a>其他vue3新特性</h4><h5 id="1-全局API的转移"><a href="#1-全局API的转移" class="headerlink" title="1.全局API的转移"></a>1.全局API的转移</h5><ul>
<li><p>Vue 2.x 有许多全局 API 和配置。</p>
<ul>
<li><p>例如：注册全局组件、注册全局指令等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//注册全局组件</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;MyButton&#x27;</span>, &#123;<br>  <span class="hljs-attr">data</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>  &#125;),<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span><br>&#125;)<br><br><span class="hljs-comment">//注册全局指令</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, &#123;<br>  <span class="hljs-attr">inserted</span>: <span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> el.<span class="hljs-title function_">focus</span>()<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Vue3.0中对这些API做出了调整：</p>
<ul>
<li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>
<table>
<thead>
<tr>
<th>2.x 全局 API（<code>Vue</code>）</th>
<th>3.x 实例 API (<code>app</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">移除</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h5 id="2-其他改变"><a href="#2-其他改变" class="headerlink" title="2.其他改变"></a>2.其他改变</h5><ul>
<li><p>data选项应始终被声明为一个函数。</p>
</li>
<li><p>过度类名的更改：</p>
<ul>
<li><p>Vue2.x写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.v-enter</span>,<br><span class="hljs-selector-class">.v-leave-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-class">.v-leave</span>,<br><span class="hljs-selector-class">.v-enter-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>Vue3.x写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.v-enter-from</span>,<br><span class="hljs-selector-class">.v-leave-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.v-leave-from</span>,<br><span class="hljs-selector-class">.v-enter-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符</p>
<ul>
<li><p>父组件中绑定事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;my-component<br>  v-on:close=&quot;handleComponentEvent&quot;<br>  v-on:click=&quot;handleNativeClickEvent&quot;<br>/&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>子组件中声明自定义事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>  export default &#123;<br>    emits: [&#x27;close&#x27;]<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p>
<blockquote>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</blockquote>
</li>
<li><p>……</p>
</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/" class="print-no-link">#语言入门</a>
      
        <a href="/tags/%E5%A4%87%E5%BF%98/" class="print-no-link">#备忘</a>
      
        <a href="/tags/%E5%89%8D%E7%AB%AF/" class="print-no-link">#前端</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>vue笔记</div>
      <div>https://asxjdb.github.io/2023/10/09/vue笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Asxjdb</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年10月9日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/10/21/rust%E6%89%8B%E5%86%8C/" title="rust手册">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">rust手册</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/10/09/Linux%E7%AC%94%E8%AE%B0/" title="命令行笔记">
                        <span class="hidden-mobile">命令行笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      

    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> <br/> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  var relativeDate = function() {
    var updatedTime = document.getElementById('updated-time');
    if (updatedTime) {
      var text = updatedTime.textContent;
      var reg = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/;
      var matchs = text.match(reg);
      if (matchs) {
        var relativeTime = moment(matchs[0]).fromNow();
        updatedTime.textContent = text.replace(reg, relativeTime);
      }
      updatedTime.style.display = '';
    }
  };
  Fluid.utils.createScript('https://lib.baomitu.com/moment.js/2.29.4/moment.min.js', function() {
    if (!'zh-cn'.startsWith('en')) {
      Fluid.utils.createScript('https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js', function() {
        relativeDate();
      });
    } else {
      relativeDate();
    }
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
